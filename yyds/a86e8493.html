<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="校园网组网实验方案, hjd&#39;blog">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>校园网组网实验方案 | hjd&#39;blog</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/css/my.css">
	<link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/artitalk/artitalk.min.css">

    <script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/jquery/jquery.min.js"></script>

<style type="text/css" lang="css">
    #loading-container{
        position: fixed;
        top: 0;
        left: 0;
        min-height: 100vh;
        width: 100vw;
        z-index: 9999;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: #FFF;
        text-align: center;
        /* loader页面消失采用渐隐的方式*/
        -webkit-transition: opacity 1s ease;
        -moz-transition: opacity 1s ease;
        -o-transition: opacity 1s ease;
        transition: opacity 1s ease;
    }
    .loading-image{
        width: 120px;
        height: 50px;
        transform: translate(-50%);
    }

    .loading-image div:nth-child(2) {
        -webkit-animation: pacman-balls 1s linear 0s infinite;
        animation: pacman-balls 1s linear 0s infinite
    }

    .loading-image div:nth-child(3) {
        -webkit-animation: pacman-balls 1s linear .33s infinite;
        animation: pacman-balls 1s linear .33s infinite
    }

    .loading-image div:nth-child(4) {
        -webkit-animation: pacman-balls 1s linear .66s infinite;
        animation: pacman-balls 1s linear .66s infinite
    }

    .loading-image div:nth-child(5) {
        -webkit-animation: pacman-balls 1s linear .99s infinite;
        animation: pacman-balls 1s linear .99s infinite
    }

   .loading-image div:first-of-type {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_up .5s 0s infinite;
        animation: rotate_pacman_half_up .5s 0s infinite;
    }
    .loading-image div:nth-child(2) {
        width: 0;
        height: 0;
        border: 25px solid #49b1f5;
        border-right-color: transparent;
        border-radius: 25px;
        -webkit-animation: rotate_pacman_half_down .5s 0s infinite;
        animation: rotate_pacman_half_down .5s 0s infinite;
        margin-top: -50px;
    }
    @-webkit-keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @keyframes rotate_pacman_half_up {0% {transform: rotate(270deg)}50% {transform: rotate(1turn)}to {transform: rotate(270deg)}}

    @-webkit-keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @keyframes rotate_pacman_half_down {0% {transform: rotate(90deg)}50% {transform: rotate(0deg)}to {transform: rotate(90deg)}}

    @-webkit-keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}

    @keyframes pacman-balls {75% {opacity: .7}to {transform: translate(-100px, -6.25px)}}


    .loading-image div:nth-child(3),
    .loading-image div:nth-child(4),
    .loading-image div:nth-child(5),
    .loading-image div:nth-child(6){
        background-color: #49b1f5;
        width: 15px;
        height: 15px;
        border-radius: 100%;
        margin: 2px;
        width: 10px;
        height: 10px;
        position: absolute;
        transform: translateY(-6.25px);
        top: 25px;
        left: 100px;
    }
    .loading-text{
        margin-bottom: 20vh;
        text-align: center;
        color: #2c3e50;
        font-size: 2rem;
        box-sizing: border-box;
        padding: 0 10px;
        text-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }
    @media only screen and (max-width: 500px) {
         .loading-text{
            font-size: 1.5rem;
         }
    }
    .fadeout {
        opacity: 0;
        filter: alpha(opacity=0);
    }
    /* logo出现动画 */
    @-webkit-keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}100%{opacity:1;-webkit-transform:none;transform:none}}
    @keyframes fadeInDown{0%{opacity:0;-webkit-transform:translate3d(0,-100%,0);}}
 </style>
 <script>
(function () {
    const loaded = function(){
       setTimeout(function(){
            const loader = document.getElementById("loading-container");
            loader.className="fadeout" ;//使用渐隐的方法淡出loading page
            // document.getElementById("body-wrap").style.display="flex";
            setTimeout(function(){
                loader.style.display="none";
            },1000); 
        },1000);//强制显示loading page 1s  
    };
    loaded();
})()
 </script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="hjd'blog" type="application/atom+xml">
</head>





 <div id="loading-container">
     <p class="loading-text">玩命加载中 . . . </p> 
     <div class="loading-image">
         <div></div>
         <div></div>
         <div></div>
         <div></div> 
         <div></div>
     </div>
 </div><body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
					<div>
						
						<img src="/medias/loading.gif" data-original="/medias/logo.png" class="logo-img" alt="LOGO">
						
						<span class="logo-span">hjd&#39;blog</span>
					</div>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/archives">
          
          <i class="fas fa-paper-plane" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>时轴</span>
        </a>
      </li>
      
      <li>
        <a href="/categories">
          
          <i class="fas fa-bookmark" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>分类</span>
        </a>
      </li>
      
      <li>
        <a href="/tags">
          
          <i class="fas fa-tags" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>标签</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="" class="waves-effect waves-light">

      
      <i class="fas fa-heartbeat" style="zoom: 0.6;"></i>
      
      <span>清单</span>
      <i class="fas fa-chevron-down" aria-hidden="true" style="zoom: 0.6;"></i>
    </a>
    <ul class="sub-nav menus_item_child ">
      
      <li>
        <a href="/music">
          
          <i class="fas fa-music" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>音乐</span>
        </a>
      </li>
      
      <li>
        <a href="/galleries">
          
          <i class="fas fa-image" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>相册</span>
        </a>
      </li>
      
      <li>
        <a href="/books">
          
          <i class="fas fa-list" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>书单</span>
        </a>
      </li>
      
      <li>
        <a href="/movies">
          
          <i class="fas fa-film" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>电影</span>
        </a>
      </li>
      
      <li>
        <a href="/resources">
          
          <i class="fas fa-cloud-download-alt" style="margin-top: -20px; zoom: 0.6;"></i>
          
          <span>资源</span>
        </a>
      </li>
      
    </ul>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/artitalk" class="waves-effect waves-light">
      
      <i class="fas fa-heart" style="zoom: 0.6;"></i>
      
      <span>说说</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tools" class="waves-effect waves-light">
      
      <i class="fas fa-toolbox" style="zoom: 0.6;"></i>
      
      <span>工具箱</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/loading.gif" data-original="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">hjd&#39;blog</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-archive"></i>
			
			归档
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/archives " style="margin-left:75px">
				  
				   <i class="fa fas fa-paper-plane" style="left: 25px; position: absolute;"></i>
			      
		          <span>时轴</span>
                  </a>
                </li>
              
                <li>

                  <a href="/categories " style="margin-left:75px">
				  
				   <i class="fa fas fa-bookmark" style="left: 25px; position: absolute;"></i>
			      
		          <span>分类</span>
                  </a>
                </li>
              
                <li>

                  <a href="/tags " style="margin-left:75px">
				  
				   <i class="fa fas fa-tags" style="left: 25px; position: absolute;"></i>
			      
		          <span>标签</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="javascript:;">
			
				<i class="fa-fw fas fa-heartbeat"></i>
			
			清单
			<span class="m-icon"><i class="fas fa-chevron-right"></i></span>
		</a>
            <ul  style="background:  ;" >
              
                <li>

                  <a href="/music " style="margin-left:75px">
				  
				   <i class="fa fas fa-music" style="left: 25px; position: absolute;"></i>
			      
		          <span>音乐</span>
                  </a>
                </li>
              
                <li>

                  <a href="/galleries " style="margin-left:75px">
				  
				   <i class="fa fas fa-image" style="left: 25px; position: absolute;"></i>
			      
		          <span>相册</span>
                  </a>
                </li>
              
                <li>

                  <a href="/books " style="margin-left:75px">
				  
				   <i class="fa fas fa-list" style="left: 25px; position: absolute;"></i>
			      
		          <span>书单</span>
                  </a>
                </li>
              
                <li>

                  <a href="/movies " style="margin-left:75px">
				  
				   <i class="fa fas fa-film" style="left: 25px; position: absolute;"></i>
			      
		          <span>电影</span>
                  </a>
                </li>
              
                <li>

                  <a href="/resources " style="margin-left:75px">
				  
				   <i class="fa fas fa-cloud-download-alt" style="left: 25px; position: absolute;"></i>
			      
		          <span>资源</span>
                  </a>
                </li>
              
            </ul>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/artitalk" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-heart"></i>
			
			说说
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友链
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tools" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-toolbox"></i>
			
			工具箱
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/321hjd/ImageBed/cover/network.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">校园网组网实验方案</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E5%B1%80%E5%9F%9F%E7%BD%91%E7%BB%84%E5%BB%BA/">
                                <span class="chip bg-color">局域网组建</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E8%AF%BE%E7%A8%8B%E5%AE%9E%E9%AA%8C/" class="post-category">
                                课程实验
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-12-10
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2021-12-31
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    16.3k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    63 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <center><font size="5">
    <b>信息与通信工程学院</b>
    <br>
    <br>
    <b>通信工程专业综合实验报告</b>
    <br>
    <br>
    <b>2021年9月20日~12月20日</b>
    <br>
    <br>
    <br>
    </font></center>


<center><font size="5">
    <b>校园网组建与应用</b>
    </font></center>

<center><b>摘 要</b></center>

<p>&emsp;&emsp;校园网作为数字化校园和智慧校园的重要载体，在师生的工作和生活中占据着举足轻重的地位。校园网要求覆盖整个校园，具有统一、高效、便于管理、可扩展性好以及安全性好等特点。此外，网络内部应存储大量教学资源以供老师学生访问，并为校内人员提供网络服务如Web服务、E-mail服务等。本项目考虑校园网的特征，基于实用设备如路由器、交换机和防火墙等，搭建一个中小型局域网，实现了校园网基本职能。三层组网模型便于网络管理和故障检测，也便于新用户以至于新校区的接入，保证了所设计网络的可扩展性。VLAN划分及ACL的制定，保证了网络的安全性。校内服务器的部署，则完善了资源共享与校内通信的服务。</p>
<p><strong>关键词</strong> 校园网 实用设备 组网</p>
<center><font size="5">
    <b>The establishment and application of campus network</b>
    </font></center>

<center><b>ABSTRACT</b></center>

<p>&emsp;As an important carrier of digital campus and smart campus, campus network occupies a pivotal position in the work and life of teachers and students. Thecampus network is required to cover the entire campus, with the characteristics of uniformity, high efficiency, easy management, good scalability, and good security. In addition, a large number of teaching resources should be stored inside the network for teachers and students to access, and network services such as Web services and E-mail services should be provided for school personnel. This project takes into account the characteristics of the campus network, and builds a small and medium-sized local area network based on practical equipment such as routers, switches, and firewalls to realize the basic functions of the campus network. The three-layer networking model is convenient for network management and fault detection, and it is also convenient for new users and even new campuses to access, ensuring the scalability of the designed network. The division of VLANs and the formulation of ACLs ensure the security of the network. The deployment of the server in the school has improved the service of resource sharing and communication in the school.</p>
<p><strong>KEY WORDS</strong>  campus network practical equipment network construction</p>
<h2 id="第一章-综述"><a href="#第一章-综述" class="headerlink" title="第一章 综述"></a>第一章 综述</h2><p>&emsp;&emsp;校园网作为数字化校园和智慧校园的重要载体，在师生的工作和生活中占据着举足轻重的地位。我们的服务目标是大学校园，最终目的是实现覆盖整个校园区域的互联、统一、高效、可扩展、安全的局域网络。网络结构上，规划合理且便于管理和故障排查；网络布线上，布局统一简洁，便于升级改造；网络功能上，能够保证新用户的便捷接入，提供资源共享能力，以及丰富多彩的网络服务^[1-4]^。基于众多网络资源以及实验室提供的资料^[5-23]^和设备，我们对整个网络进行了分析、设计和实验。</p>
<h2 id="第二章-需求分析"><a href="#第二章-需求分析" class="headerlink" title="第二章 需求分析"></a>第二章 需求分析</h2><p>&emsp;&emsp;由于大学校园组成复杂，各个部门、各个区域、师生和临时人员对上网的需求存在一定的差异性，对每个网络于系统复杂程度、应用范围及规模上都存在较大的不同。同时考虑到平时的使用习惯和使用经验，我们从网络性能、网络管理、网络安全、网络服务以及网络扩展五大方面进行了需求分析。</p>
<h3 id="2-1-网络性能需求"><a href="#2-1-网络性能需求" class="headerlink" title="2.1 网络性能需求"></a>2.1 网络性能需求</h3><ol>
<li><p> 带宽合理，保证传输速率。</p>
</li>
<li><p> 节点分布合理，保证不同区域接入需求。</p>
</li>
<li><p> 设备选用合理，不同层次不同区域设备选用具有合适吞吐量的设备。</p>
</li>
</ol>
<h3 id="2-2-网络管理需求"><a href="#2-2-网络管理需求" class="headerlink" title="2.2 网络管理需求"></a>2.2 网络管理需求</h3><ol>
<li><p> 合理的拓扑结构。树型拓扑结构便于管理和问题排查。</p>
</li>
<li><p> 合理的组网模型。三层组网模型及其扁平化处理使得整体网络结构清晰，层次分明。</p>
</li>
</ol>
<h3 id="2-3-网络安全需求"><a href="#2-3-网络安全需求" class="headerlink" title="2.3 网络安全需求"></a>2.3 网络安全需求</h3><ol>
<li><p> 内部网络划分VLAN 网段，隔离广播域，防止网络窃听和非授权的跨网段访问。</p>
</li>
<li><p> 使用硬件防火墙，通过ACL限定用户的访问权限，尤其是内外部网络的隔离。</p>
</li>
<li><p> 在内网出口上配置NAT转换，不让内网主机直接暴露在因特网上，保证内网主机的安全。</p>
</li>
</ol>
<h3 id="2-4-网络服务需求"><a href="#2-4-网络服务需求" class="headerlink" title="2.4 网络服务需求"></a>2.4 网络服务需求</h3><ol>
<li><p> 搭建Web服务器以提供网页访问服务。</p>
</li>
<li><p> 搭建FTP服务器以提供文件资源共享服务。</p>
</li>
<li><p> 搭建E-mail服务器以提供邮件转发服务。</p>
</li>
<li><p> 搭建DNS服务器实现域名解析服务。</p>
</li>
<li><p> 搭建DHCP服务器以便于主机自动获取IP地址。</p>
</li>
</ol>
<h3 id="2-5-网络扩展需求"><a href="#2-5-网络扩展需求" class="headerlink" title="2.5 网络扩展需求"></a>2.5 网络扩展需求</h3><ol>
<li><p> 接入扩展。通过二层、三层交换机的部署，使得新用户、新校区能简单地接入现有网络。</p>
</li>
<li><p> 平滑升级。通过网络结构的设计，使得更新换代时能够保证便捷性、非破坏性。升级改造时只需简单地更换高速率的集线设备，就能完成升级。</p>
</li>
</ol>
<h2 id="第三章-布线方案"><a href="#第三章-布线方案" class="headerlink" title="第三章 布线方案"></a>第三章 布线方案</h2><p>&emsp;&emsp;为了便于以后校园规划的便捷性，提高网络的可管理性和可扩展性，我们采用的是结构化布线方案。该方案具有实用性、灵活性、模块化、可扩展和可靠性高等五大特点。该布线系统对内适应不同的网络设备、主机、终端、PC及外部设备，可构成灵活的拓扑结构，有足够的系统扩展能力，对外通过与国家公网与外部信息源相连，组成全方位多通道的信息访问系统。既能适应当前信息处理的需要，又充分考虑到信息系统未来的发展趋势。[5]</p>
<h3 id="3-1-结构化布线特点"><a href="#3-1-结构化布线特点" class="headerlink" title="3.1 结构化布线特点"></a>3.1 结构化布线特点</h3><ol>
<li><p> 实用性：实施后的楼宇自动化系统及其所有的子系统的通讯线路和接口都满足国际标准。具有良好的用户使用界面，并且网络管理功能完善、使用方便。</p>
</li>
<li><p> 灵活性：系统中任一部分的连接都是灵活的，即从物理接线到数据通讯、语音通讯、智能控制设备之间的连接都不受或极少受物理位置和这些设备类型的限制。</p>
</li>
<li><p> 模块化：所有用于连接设备的适配件都是积木式的标准件，不需要掌握很多有关这些领域的专门知识，就能够连接这些设备。</p>
</li>
<li><p> 扩展性：由于系统的所有基础设施(材料、部件、通讯设备）都采用国际标准，因此，无论计算机设备、通讯设备、智能控制设备随技术的发展，将来都可能很方便地将其连接到楼宇自动化系统中去。</p>
</li>
<li><p> 可靠性：系统中的各个部分都采用高质量的材料、组部件设备实现，并谨慎施工和测试，以保证系统的各个环节都是可靠的。</p>
</li>
</ol>
<h3 id="3-2-结构化布线图"><a href="#3-2-结构化布线图" class="headerlink" title="3.2 结构化布线图"></a>3.2 结构化布线图</h3><p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E6%A0%A1%E5%9B%AD%E6%95%B4%E4%BD%93%E7%BD%91%E7%BB%9C%E5%B8%83%E7%BA%BF%E7%BB%93%E6%9E%84%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt="图3-1 校园整体网络布线结构示意图"></p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE3-2%E5%AE%BF%E8%88%8D%E6%A5%BC%E6%95%B4%E4%BD%93%E7%BD%91%E7%BB%9C%E5%B8%83%E7%BA%BF%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt="图3-2 宿舍楼整体网络布线示意图"></p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE3-3%E5%AE%BF%E8%88%8D%E6%A5%BC%E5%86%85%E9%83%A8%E5%B8%83%E7%BA%BF%E7%BB%93%E6%9E%84%E5%B9%B3%E9%9D%A2%E5%9B%BE.png" alt="图3-3 宿舍楼内部布线结构平面图"></p>
<h2 id="第四章-网络规划"><a href="#第四章-网络规划" class="headerlink" title="第四章 网络规划"></a>第四章 网络规划</h2><p>&emsp;&emsp;我们组建的网络采用三层组网模型[5]。该模型自底向上为接入层、汇聚层及核心层，每层设备各司其职，具备良好的可管理性和可扩展性。基于三层组网模型，我们首先设计了整体的校园网络结构，其次由于实验室设备有限，并且经过分析，很多区域的通信过程相同，因此将原有网络结构进行简化，生成验证方案网络结构。最后在简化校园网络的基础上，我们为其进行了明确的IP地址分配和设备端口规划。</p>
<h3 id="4-1-三层组网模型设计原则-5"><a href="#4-1-三层组网模型设计原则-5" class="headerlink" title="4.1 三层组网模型设计原则^[5]^"></a>4.1 三层组网模型设计原则^[5]^</h3><ol>
<li><p> 选择最合适需求的分级模型。边界（汇聚层节点）作为广播的隔离点，同时还是网络控制功能的焦点。</p>
</li>
<li><p> 不要使网络的各层总是完全网状的，即接入层交换机不能直接相连，而需要通过汇聚层节点连接。但核心层通常是网状的，目的是考虑到电路冗余和网络收敛速度的原因。</p>
</li>
<li><p> 不要把终端工作站安装在主干网上。可提高主干网可靠性，便于通信量管理和增大带宽设计的实现，加快收敛速度。</p>
</li>
<li><p> 通过把80%的通信量控制在本地工作组内部，使工作组LAN运行良好。即尽量使联系较多的人员分配在同一子网或同一VLAN中，从而高程度实现通信隔离，既缓解了网络压力，又能保证安全性。</p>
</li>
<li><p> 对于网络规模小的，也可以省去汇聚层。</p>
</li>
</ol>
<h3 id="4-2-组网模型说明"><a href="#4-2-组网模型说明" class="headerlink" title="4.2 组网模型说明"></a>4.2 组网模型说明</h3><p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE4-1%E6%95%B4%E4%BD%93%E6%A0%A1%E5%9B%AD%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE.png" alt="图4-1 整体校园网络结构设计图"></p>
<p>&emsp;&emsp;网络结构自底向上分别为接入层、汇聚层、核心层。接入层直接连接学校用户的计算机。以宿舍为例，每层楼设置一个或多个接入层节点（交换机），为每个宿舍留出一个接口。然后该接口通过<br>AP进行无线局域网覆盖，同时再通过一个交换机（交换机堆叠）接入到宿舍4/6/8人的计算机。其次，整栋楼设置一个汇聚层节点，负责汇总连接接入层节点。各个建筑的汇聚层节点通过光缆连接至核心层节点，核心层连接服务器或者经过路由器接至外部网络。图4-1为整体校园网络结构设计图。</p>
<h4 id="4-2-1核心层"><a href="#4-2-1核心层" class="headerlink" title="4.2.1核心层"></a>4.2.1核心层</h4><p>&emsp;&emsp;核心层是局域网的主干部分，主要目的是尽可能快地交换数据。不应涉及费力的数据包操作或减慢数据交换的处理。应避免在核心层使用访问控制列表（ACL）和数据包过滤之类的操作（防火墙的功能）。此外，核心层被认为是所有流量的最终承受者和汇聚者，因此核心层交换机应该采用拥有更高带宽、更高可靠性、更高性能和吞吐量的千兆甚至万兆以上的交换机。一般采用高端三层交换机。</p>
<p>核心层的主要工作为：</p>
<ol>
<li><p> 提供交换区块间的连接。</p>
</li>
<li><p> 提供到其它区块的访问。</p>
</li>
<li><p> 尽可能快地交换数据帧或包。</p>
</li>
</ol>
<h4 id="4-2-2汇聚层"><a href="#4-2-2汇聚层" class="headerlink" title="4.2.2汇聚层"></a>4.2.2汇聚层</h4><p>&emsp;&emsp;汇聚层是接入层和核心层之间的分界点。负责提供边界定义（如VLAN划分）并对潜在的费力的数据包操作进行处理。汇聚层为接入层提供基于策略的连接，如地址合并、协议过滤、路由服务、认证管理等。通过VLAN划分屏蔽接入层对核心层的影响。提供接入层VLAN之间的互连，控制和限制接入层对核心层的访问，保证核心层的安全和稳定。一般也采用三层交换机。</p>
<p>汇聚层的主要工作为：</p>
<ol>
<li><p> VLAN聚合。</p>
</li>
<li><p> VLAN间路由。</p>
</li>
<li><p> 部门级和工作组接入。</p>
</li>
<li><p> 广播域或组播域的定义。</p>
</li>
<li><p> 介质转换。</p>
</li>
<li><p> 安全。</p>
</li>
</ol>
<h4 id="4-2-3接入层"><a href="#4-2-3接入层" class="headerlink" title="4.2.3接入层"></a>4.2.3接入层</h4><p>&emsp;&emsp;接入层利用光纤、双绞线、同轴电缆、无线接入技术等传输介质，实现与用户（工作站、AP等）连接，并进行业务和带宽的分配。接入层常用包过滤策略提供基本的安全性，以保护局域网免受网络内外的攻击。接入层的主要准则是通过低成本和高端口密度的设备提供安全接入功能，采用“低端”交换机（二层交换机），被称作工作组交换机或接入层交换机。</p>
<p>接入层的主要工作为：</p>
<ol>
<li><p> 将流量导入网络。</p>
</li>
<li><p> 提供二层服务：基于广播或MAC地址的VLAN成员资格和数据流过滤。</p>
</li>
<li><p> 访问控制。</p>
</li>
</ol>
<h4 id="4-2-4各部分区域说明"><a href="#4-2-4各部分区域说明" class="headerlink" title="4.2.4各部分区域说明"></a>4.2.4各部分区域说明</h4><ol>
<li><p> 核心区。设定信息中心为核心区域，仅可在内网中通信，不能访问外网。</p>
</li>
<li><p> 无线覆盖区域。此处的无线覆盖区域并非单指某一区域，而是代指每个区域区分于有线网络的无线覆盖。如在每个宿舍的接入层交换机连接多个AP，以保证每间宿舍的无线网覆盖。</p>
</li>
<li><p> 涉密机器区域。该区域的机器仅能够在自身VLAN内部通信。</p>
</li>
<li><p> 校区B。设置校区B以模拟验证方案的可扩展性，未来随着校园规划增加校区，可继续通过接入核心层交换机接入整体网络。或者如果校区规模非常大，还可以独立于校区A，具备完整的三层结构并通过自己的出口路由器连接外部网络（即与校区A类似）。与校区A的互访仍通过核心层交换机进行。</p>
</li>
<li><p> 对内服务器区域。用于部署校内所需要的各种网络服务器。</p>
</li>
<li><p> Internet及学校2。由于校园内不允许私自通过路由器接入外网网线，因此我们设立学校2来模拟外部网络用户与内网用户的通信过程。</p>
</li>
<li><p> 出口路由器与防火墙。用于隔离内外部网络以及实现接入广域网。设计冗余链路实现负载均衡和热备份，以防止某一个机器宕机之后网络瘫痪。</p>
</li>
</ol>
<h3 id="4-3-网络结构简化"><a href="#4-3-网络结构简化" class="headerlink" title="4.3 网络结构简化"></a>4.3 网络结构简化</h3><p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE4-2%E9%AA%8C%E8%AF%81%E6%96%B9%E6%A1%88%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E8%AE%BE%E8%AE%A1%E5%9B%BE.png" alt="图4-2 验证方案网络结构设计图"></p>
<p>&emsp;&emsp;由于设备和时间有限，考虑到实验的可操作性，我们尽可能简化了网络设计并以此方案进行组网实验。一是对学校建筑选择的简化，二是对VLAN划分的简化，三是网络拓扑结构的简化。图4-2为简化后的验证方案网络拓扑图。图中对各部分VLAN、IP地址以及部分接口做了说明。</p>
<ol>
<li><p>建筑选择。只对所设计学校中的部分代表性区域进行网络设计及验证，未在网络拓扑图中出现的部门/区域认为其网络需求与其它区域相同或类似，同时在网络涉设计中会留有便于扩展的接口。经过分析，从所有学校建筑中挑选出五个部分：宿舍楼、科研楼、行政及信息中心。</p>
</li>
<li><p>网络拓扑。对于学校来说，因为其人员多、覆盖范围广，应考虑采用三层结构组网模型。但为了实验的可操作性，并且由于不同汇聚层交换机与核心层交换机的通信过程、以及其下的VLAN的通信过程都是类似的。因此我们省去汇聚层，将接入层交换机与核心层直接相连。</p>
</li>
<li><p>VLAN划分。出于便捷性和实用性考虑，同一VLAN内工作站不会分布在不同的交换机上。另外因为不同VLAN间通信均需要通过三层设备（三层交换机或路由器），因此无论是同一交换机上的VLAN，还是不同交换机上的VLAN，其通信过程相同。故在网络设计图中会将不同交换机上的VLAN接入到同一接入层交换机。</p>
<p>VLAN具体设计：</p>
<ol>
<li><p> VLAN2、3、4、6、7间互通</p>
</li>
<li><p> VLAN4只能在内网通信，不能访问外部网络</p>
</li>
<li><p> VLAN5只能在VLAN内部通信</p>
</li>
<li><p> VLAN7属于内部服务器区域，为内网用户提供服务，不能访问外网，也不能被外网访问</p>
</li>
</ol>
</li>
</ol>
<h3 id="4-4-IP地址及设备端口规划"><a href="#4-4-IP地址及设备端口规划" class="headerlink" title="4.4 IP地址及设备端口规划"></a>4.4 IP地址及设备端口规划</h3><ul>
<li><p>接入层交换机：S2A（H3C S3100）</p>
<p>因为前期实验时没注意到H3C S3100是三层交换机，已经配置了许多，故直接用其代替二层交换机使用。</p>
<p>表4-1 S2A端口分配表</p>
<table>
<thead>
<tr>
<th align="center"><strong>端口</strong></th>
<th align="center"><strong>模式</strong></th>
<th align="center"><strong>VLAN</strong></th>
<th align="center"><strong>网段</strong></th>
<th align="center"><strong>默认网关</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">e0/1~e0/4</td>
<td align="center">access</td>
<td align="center">VLAN2</td>
<td align="center">192.168.2.0</td>
<td align="center">192.168.2.254/24</td>
</tr>
<tr>
<td align="center">e0/5~e0/8</td>
<td align="center">access</td>
<td align="center">VLAN3</td>
<td align="center">192.168.3.0</td>
<td align="center">192.168.3.254/24</td>
</tr>
<tr>
<td align="center">e0/9~e0/12</td>
<td align="center">access</td>
<td align="center">VLAN4</td>
<td align="center">192.168.4.0</td>
<td align="center">192.168.4.254/24</td>
</tr>
<tr>
<td align="center">e0/13~e0/16</td>
<td align="center">access</td>
<td align="center">VLAN5</td>
<td align="center">192.168.5.0</td>
<td align="center">192.168.5.254/24</td>
</tr>
<tr>
<td align="center">e0/20</td>
<td align="center">trunk</td>
<td align="center">VLAN2-4、6-7</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
</li>
<li><p>接入层交换机S2B（Quidway E050）</p>
<p>表4-2 S2B端口分配表</p>
<table>
<thead>
<tr>
<th align="center"><strong>端口</strong></th>
<th align="center"><strong>模式</strong></th>
<th align="center"><strong>VLAN</strong></th>
<th align="center"><strong>网段</strong></th>
<th align="center"><strong>默认网关</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">e0/45~e0/48</td>
<td align="center">access</td>
<td align="center">VLAN6</td>
<td align="center">192.168.6.0</td>
<td align="center">192.168.6.254/24</td>
</tr>
<tr>
<td align="center">e0/10</td>
<td align="center">trunk</td>
<td align="center">VLAN2-4、6-7</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
</li>
<li><p>核心层交换机S3（H3C 3610）</p>
<ul>
<li>下行端口<br>表4-3-1 S3下行端口分配表<table>
<thead>
<tr>
<th align="center"><strong>端口</strong></th>
<th align="center"><strong>模式</strong></th>
<th align="center"><strong>VLAN</strong></th>
<th align="center"><strong>网段/IP地址</strong></th>
<th align="center"><strong>默认网关</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="center">e1/0/9~e1/0/12</td>
<td align="center">access</td>
<td align="center">VLAN7</td>
<td align="center">192.168.7.0</td>
<td align="center">192.168.7.254/24</td>
</tr>
<tr>
<td align="center"><strong>端口</strong></td>
<td align="center"><strong>模式</strong></td>
<td align="center"><strong>接入设备</strong></td>
<td align="center"><strong>allow-pass</strong></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">e1/0/1</td>
<td align="center">trunk</td>
<td align="center">S2A</td>
<td align="center">VLAN2-4、6-7</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">e1/0/2</td>
<td align="center">trunk</td>
<td align="center">S2B</td>
<td align="center">VLAN2-4、6-7</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"><strong>interface-vlan</strong></td>
<td align="center"><strong>IP地址</strong></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">——————</td>
<td align="center">————-</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">interface-vlan2</td>
<td align="center">192.168.2.254</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">interface-vlan3</td>
<td align="center">192.168.3.254</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">interface-vlan4</td>
<td align="center">192.168.4.254</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">interface-vlan6</td>
<td align="center">192.168.6.254</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">interface-vlan7</td>
<td align="center">192.168.7.254</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>上行端口<br>表4-3-2 S3上行端口分配表</p>
<table>
<thead>
<tr>
<th><strong>端口</strong></th>
<th><strong>接入设备</strong></th>
<th><strong>模式</strong></th>
<th><strong>IP地址</strong></th>
<th><strong>网关</strong></th>
</tr>
</thead>
<tbody><tr>
<td>e1/0/20</td>
<td>firewall</td>
<td>access</td>
<td>192.168.10.1</td>
<td>192.168.10.2</td>
</tr>
</tbody></table>
</li>
<li><p>防火墙firewall（H3C SecPath F100-A）<br>表4-4 防火墙端口分配表</p>
<table>
<thead>
<tr>
<th><strong>端口</strong></th>
<th><strong>作用</strong></th>
<th><strong>IP地址</strong></th>
</tr>
</thead>
<tbody><tr>
<td>E0/0</td>
<td>内网端口LAN0，trust</td>
<td>192.168.10.2/24</td>
</tr>
<tr>
<td>E1/0</td>
<td>外网端口WAN0，untrust</td>
<td>202.99.160.2/28</td>
</tr>
</tbody></table>
</li>
<li><p>路由器R1（H3C R2501E）<br>表4-5 R1端口分配表</p>
<table>
<thead>
<tr>
<th><strong>端口</strong></th>
<th><strong>IP地址</strong></th>
</tr>
</thead>
<tbody><tr>
<td>E0</td>
<td>202.99.160.1/28</td>
</tr>
<tr>
<td>S0</td>
<td>10.1.1.2/24</td>
</tr>
</tbody></table>
</li>
<li><p>路由器R2（H3C R2501E）<br>表4-6 R2端口分配表</p>
<table>
<thead>
<tr>
<th><strong>端口</strong></th>
<th><strong>IP地址</strong></th>
</tr>
</thead>
<tbody><tr>
<td>E0</td>
<td>192.168.9.254</td>
</tr>
<tr>
<td>S0</td>
<td>10.1.1.1/24</td>
</tr>
</tbody></table>
</li>
<li><p>接入层交换机S2C（Quidway E050）</p>
<p>e0/1~e0/16为VLAN9，直接将e0/4接入路由器R2</p>
</li>
</ul>
<h2 id="第五章-设备配置"><a href="#第五章-设备配置" class="headerlink" title="第五章 设备配置"></a>第五章 设备配置</h2><h3 id="5-1设备说明"><a href="#5-1设备说明" class="headerlink" title="5.1设备说明"></a>5.1设备说明</h3><ol>
<li><p>以太网交换机^[6]^</p>
<ol>
<li><p> 定义：交换机是用于电信号转发的网络设备。以太网交换机是基于以太网传输数据的交换机。其每个端口直接与主机相连，并一般工作在全双工方式。实质上就是一个多端口的网桥，能连通多个端口并使每一对相互通信的主机都像独占通信媒体一样，无冲突传输数据（分隔冲突域）。</p>
</li>
<li><p> 传输模式：全双工、半双工、全双工/半双工自适应。</p>
</li>
<li><p> 原理：工作在数据链路层，使用MAC地址（48位，6字节）。当接受到一个广播帧时，他会向除接受端口之外的所有端口转发；当接受到一个单播帧时，检查其目的地址并对应自己的MAC地址表，如果存在目的地址，则转发，如果不存在则泛洪(广播)，广播后如果没有主机的MAC地址与帧的目的MAC地址相同，则丢弃，若有主机相同，则会将主机的MAC自动添加到其MAC地址表中（学习）。</p>
</li>
<li><p> 主要功能：物理编址、网络拓扑结构、错误校验、帧序列以及流控。</p>
</li>
<li><p> 特点：转发速度非常快。</p>
</li>
</ol>
</li>
<li><p>二层交换机^[7]^</p>
<ol>
<li><p> 定义：指只支持OSI第二层(数据链路层)交换技术的交换机。</p>
</li>
<li><p>特点</p>
<ol>
<li><p> 多端口数据同时交换，故要求具有很高的交换总线带宽。</p>
</li>
<li><p> 学习端口连接机器的MAC地址，地址表大小影响交换机的接入容量。</p>
</li>
<li><p>含有专用于处理数据包转发的ASIC（Application Specific Integrated<br> Circuit）芯片，转发速度非常快。</p>
</li>
</ol>
</li>
</ol>
</li>
<li><p>三层交换机^[8]^</p>
<ol>
<li><p>定义：具有部分路由器功能的交换机。工作在网络层。基于IP设计。三层交换技术<br> = 二层交换技术 + 三层转发技术</p>
</li>
<li><p> 目的：加快大型局域网“内部”的数据交换，所具有的路由功能也是为这目的服务的，能够做到一次路由，多次转发。</p>
</li>
<li><p> 应用环境：大型局域网按功能/地域（逻辑）划分为多个小局域网（VLAN），不同VLAN间通过三层交换机通信，因为它具有二层交换的速度，同时能完成部分传统路由器的功能。</p>
</li>
</ol>
</li>
<li><p>路由器^[9]^</p>
<ol>
<li><p> 定义：工作在网络层，用于在不同的网络间存储转发分组。可在异种网络间（如不同局域网、局域网与广域网、广域网与广域网）传输数据并进行路径选择。多协议的路由器可以连接到使用完全不同的网络层、数据链路层和物理层协议的网络。</p>
</li>
<li><p>原理：</p>
<ol>
<li><p> IP地址：通信节点的唯一标识。根据数据包的IP将其从正确接口转发出去。</p>
</li>
<li><p> 控制部分与数据转发部分：在控制部分，路由器通过路由协议交换网络的拓扑结构信息，依照拓扑结构动态生成路由表。在数据转发部分，转发引擎从输入线路接受IP分组之后，分析并修改分组头，使用转发表查找下一跳，把数据交换到输出线路上，向相应方向转发。转发表是根据路由表生成的，其表项和路由表项有直接对应关系，更适合实现快速查找。转发的主要流程包括线路输入、分组头分析、数据存储、分组头修改和线路输出</p>
</li>
<li><p> 输入和输出端口：输入端口是物理链路的连接点，也是数据的接收点。它完成的功能主要包括数据链路层帧的封装和解封装。输出端口主要完成数据的排队、缓冲管理以及调度输出，同时也要执行数据的封装和支持物理层、链路层协议。</p>
</li>
<li><p> 选路策略与选路机制：选路策略——静态/动态路由表确定最佳传输路径。选路机制——查找路由表并根据结果转发。</p>
</li>
</ol>
</li>
<li><p>功能：</p>
<ol>
<li><p> 组网。连接不同网络，提供分组转发；通过分段改进局域网性能，划分网段并阻隔广播包以避免“广播风暴”；多协议路由器实现不同协议间的转换</p>
</li>
<li><p> 安全防护。防止外部网络对内部网络的信息窃取和攻击；阻止内部网络某些用户对外部网络的访问</p>
</li>
<li><p> 网络管理。流量控制。</p>
</li>
<li><p> IP地址共享。内部用户使用外部公开IP地址访问互联网。</p>
</li>
</ol>
</li>
</ol>
</li>
<li><p>防火墙^[10]^</p>
<ol>
<li><p> 定义：防火墙技术是通过有机结合各类用于安全管理与筛选的软件和硬件设备，帮助计算机网络于其内、外网之间构建一道相对隔绝的保护屏障，以保护用户资料与信息安全性的一种技术。</p>
</li>
<li><p>功能：</p>
<ol>
<li><p> 网络安全屏障：过滤不安全的网络服务</p>
</li>
<li><p> 强化网络安全策略：通过以firewall为中心的安全方案配置，将安全软件配置在防火墙上，集中安全管理。</p>
</li>
<li><p> 监控审计：记录经过firewall的访问并作日志记录。可疑时报警并提供详细信息。</p>
</li>
<li><p> 防止内部信息外泄：划分内部网络，实现内网重点网段的隔离，从而限制局部重点或敏感网络安全问题对全局网络造成的影响。</p>
</li>
<li><p> 日志记录与事件通知。</p>
</li>
</ol>
</li>
<li><p>特征：</p>
<ol>
<li><p> 数据必经之地：内部网络和外部网络之间的所有网络数据流都必须经过防火墙。</p>
</li>
<li><p> 典型的防火墙体系网络结构一端连接企事业单位内部的局域网，而另一端则连接着互联网。所有的内、外部网络之间的通信都要经过防火墙，只有符合安全策略的数据流才能通过防火墙。</p>
</li>
<li><p> 确保网络流量的合法性</p>
</li>
<li><p> 抗攻击免疫力</p>
</li>
</ol>
</li>
<li><p>主要类型：</p>
<ol>
<li><p> 过滤型（网络层与传输层）</p>
</li>
<li><p> 应用代理型（OSI最高层，应用层之上）</p>
</li>
<li><p> 复合型（应用最广泛）</p>
</li>
</ol>
</li>
<li><p>关键技术</p>
<ol>
<li><p> 包过滤技术（网络层）</p>
</li>
<li><p> 加密技术</p>
</li>
<li><p> 防病毒技术</p>
</li>
<li><p> 代理服务器（实现信息数据IP的虚拟化）</p>
</li>
</ol>
</li>
<li><p>部署方式</p>
<ol>
<li><p> 桥模式（透明模式）：内外网在同一网段。此模式下firewall无IP地址。</p>
</li>
<li><p> 网关模式：内外网不在同一网段，firewall设置网关地址实现路由器的功能。比桥模式更安全。</p>
</li>
<li><p>NAT模式(Network Address<br> Translation)：防火墙对内部网络的IP地址进行地址翻译，使用防火墙的IP地址替换内部网络的源地址向外部网络发送数据；当外部网络的响应数据流量返回到防火墙后，防火墙再将目的地址替换为内部网络的源地址。</p>
</li>
<li><p> 高可靠设计：冗余技术。如虚拟路由冗余协议（VRRP）</p>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="5-2原理说明"><a href="#5-2原理说明" class="headerlink" title="5.2原理说明"></a>5.2原理说明</h3><h4 id="5-2-1-VLAN原理"><a href="#5-2-1-VLAN原理" class="headerlink" title="5.2.1 VLAN原理"></a>5.2.1 VLAN原理</h4><p>&emsp;&emsp;VLAN^[11]^（Virtual LAN）即“虚拟局域网”，可以看做是在一个物理局域网络上搭建出几个逻辑上分离的几个局域网。举例来说，如果一个交换机划分为两个VLAN，则相当于这台交换机逻辑上划分为两个交换机。实际上VLAN也可以跨越多台交换机，本质上VLAN是一个网络层次上的概念，将整个网络划分为多个逻辑上隔离的网络（一个VLAN就是一个独立的广播域）。</p>
<p>引入VLAN的概念，主要有以下好处，总结如下：</p>
<ol>
<li><p>更安全：数据包仅在本VLAN内传递。</p>
<p> &emsp;&emsp;由于配置了VLAN后，一个VLAN的数据包不会发送到另一个VLAN，这样，其他VLAN的用户的网络上是收不到任何该VLAN的数据包，这样就确保了该VLAN的信息不会被其他VLAN的人窃听，从而实现了信息的保密。</p>
</li>
<li><p>更高效：泛洪转发仅在本VLAN内复制。</p>
<p> &emsp;&emsp;按照802.1D透明网桥的算法，如果一个数据包找不到MAC表，那么交换机就会将该数据包向除接收端口以外的其他所有端口发送，这就是桥的泛洪转发。（典型的广播方式包括组播报文，广播报文，以及未知单播报文都会进行泛洪转发）。这样的结果，毫无疑问极大的浪费了带宽，如果配置了VLAN，那么，当一个数据包需要泛洪转发时，交换机只会将此数据包发送到所有属于该VLAN的其他端口，而不是所有的交换机的端口，这样，就将数据包限制到了一个VLAN内。在一定程度上可以节省带宽。</p>
</li>
<li><p>更方便：不改变物理组网的情况下，灵活进行逻辑网络的变更。</p>
<p> &emsp;&emsp;使用VLAN的最终目标就是建立虚拟工作组模型，例如，在企业网中，同一个部门的就好象在同一个LAN上一样，很容易的互相访问，交流信息，同时，所有的广播包也都限制在该虚拟LAN上，而不影响其他VLAN的人。一个人如果从一个办公地点换到另外一个地点，而他仍然在该部门，那么，该用户的配置无须改变；同时，如果一个人虽然办公地点没有变，但他更换了部门，那么，只需网络管理员更改一下该用户的配置即可。这个功能的目标就是建立一个动态的组织环境，当然，这只是一个理想的目标，要实现它，还需要一些其他方面的支持。</p>
</li>
</ol>
<p>VLAN交换机的端口一般可以分为几大类：</p>
<ol>
<li><p>Access端口</p>
<p>&emsp;&emsp;一般用于交换机与终端之间，该类端口仅归属于一个VLAN。Access链路上的报文没有VLAN<br>tag，与传统报文保持兼容。但交换机的Access端口上回配置VLAN。这样所有从该Access链路上收到的报文都归属于Access端口所归属的VLAN。（核心概念：报文兼容，没有vlan-tag）</p>
</li>
<li><p>Trunk端口</p>
<p>&emsp;&emsp;一般交换机与交换机之间，该类型端口允许多个VLAN的报文通过。该端口所在的链路上的报文需要有VLAN<br>tag。（核心概念：除默认VLAN外，其他VLAN报文有vlan-tag）</p>
</li>
<li><p>Hybrid端口</p>
<p>&emsp;&emsp;Hybrid类型的端口可以允许多个VLAN通过，可以接收和发送多个VLAN的报文，可以用于交换机之间连接，也可以用于连接用户的计算机。Hybrid端口和Trunk端口在接收数据时，处理方法是一样的，唯一不同之处在于发送数据时：Hybrid端口可以允许多个VLAN的报文发送时不打标签，而Trunk端口只允许缺省VLAN的报文发送时不打标签。（核心概念：哪些VLAN打tag，哪些不打tag可以手工配置）</p>
</li>
</ol>
<p>&emsp;&emsp;本次实验配置主要用到了Access端口和Trunk端口。</p>
<p>&emsp;&emsp;图是处于VLAN10下的PC1向VLAN20下的PC2发送数据包的流程图：</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-1%E4%B8%8D%E5%90%8CVLAN%E4%B8%8B%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BD%AC%E5%8F%91%E5%9B%BE.jpg" alt="图5-1 不同VLAN下的数据转发图"></p>
<h4 id="5-2-2-DHCP原理"><a href="#5-2-2-DHCP原理" class="headerlink" title="5.2.2 DHCP原理"></a>5.2.2 DHCP原理</h4><p>&emsp;&emsp;DHCP^[12]^服务事件的序列如下：</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-2DHCP%E6%9C%8D%E5%8A%A1%E6%97%B6%E9%97%B4%E5%BA%8F%E5%88%97%E5%9B%BE.png" alt="图5-2 DHCP服务时间序列图"></p>
<p>&emsp;&emsp;客户机通过将搜索消息广播到本地子网上的有限广播地址 (255.255.255.255) 来搜索 DHCP 服务器。如果存在路由器并已将其配置为充当 BOOTP 中继代理的角色，请求便会传送到不同子网上的其他 DHCP 服务器。客户机的广播包括其唯一的 ID，在 Oracle Solaris 中的 DHCP 实现中，此 ID 由客户机的介质访问控制 (Media Access Control, MAC) 地址派生而来。在以太网上，MAC 地址与以太网地址相同。</p>
<p>&emsp;&emsp;在 DHCP 服务器确定客户机的网络之后，便会选择相应的 IP 地址并确认该地址尚未使用。然后，DHCP服务器通过广播一条提供消息来响应客户机。该提供消息中包含选定的 IP 地址以及有关可为客户机配置的服务的信息。每台服务器都会暂时保留所提供的 IP 地址，直到客户机确定是否使用该 IP 地址为止。</p>
<p>&emsp;&emsp;客户机会根据所提供的服务的数量和类型来选择最佳内容。客户机会广播一条请求来指定提供最佳内容的服务器的 IP 地址。该广播确保所有发出响应的 DHCP 服务器都知道客户机已经选择了一台服务器。未被选中的服务器会取消对之前提供的 IP 地址的保留。</p>
<p>&emsp;&emsp;被选中的服务器会为客户机分配 IP 地址，并将信息存储到 DHCP 数据存储中。该服务器还会向客户机发送一条确认消息 (acknowledgement message, ACK)。确认消息包含客户机的网络配置参数。客户机使用 ping 实用程序测试此 IP<br>地址，以确保它没有被其他系统使用。然后，客户机会继续引导以加入网络。</p>
<p>&emsp;&emsp;客户机会监视租用时间。当设定的时间段过去时，客户机会向所选的服务器发送一条新消息来延长租用时间。</p>
<p>&emsp;&emsp;接收请求的 DHCP 服务器会延长租用时间，前提是租用仍然遵循由管理员设置的本地租用策略。如果服务器在 20 秒内没有响应，客户机便会广播一条请求，以便其他 DHCP 服务器之一可以延长租用期。</p>
<p>&emsp;&emsp;当客户机不再需要 IP 地址时，便会通知服务器已释放了 IP 地址。此通知可以在正常关机时发送，也可以手动发送。</p>
<h4 id="5-2-3-OSPF原理"><a href="#5-2-3-OSPF原理" class="headerlink" title="5.2.3 OSPF原理"></a>5.2.3 OSPF原理</h4><p>&emsp;&emsp;OSPF[13]路由协议是一种典型的链路状态（Link-state）的路由协议，一般用于同一个路由域内。在这里，路由域是指一个自治系统（Autonomous System），即AS，它是指一组通过统一的路由政策或路由协议互相交换路由信息的网络。在这个AS中，所有的OSPF路由器都维护一个相同的描述这个AS结构的数据库，该数据库中存放的是路由域中相应链路的状态信息，OSPF路由器正是通过这个数据库计算出其OSPF路由表的。</p>
<p>&emsp;&emsp;当路由器开启OSPF后，路由器之间就会相互发送HELLO报文，HELLO报文中包含一些路由器和链路的相关信息，发送HELLO报文的目的是为了形成邻居表，然后，路由器之间就会发送LSA（LINK STATE ADVERTISEMENT，链路状态通告），LSA告诉自己的邻居路由器和自己相连的链路的状态，最后，形成网络的拓扑表，其实这个过程是很复杂的，他们经过发LSA，记录LSA，装发LSA，最后形成LSDB（链路状态数据库，即拓扑表），形成拓扑表之后，在经过SPF算法，通过计算LSDB，最后形成路由表。形成路由表后，路由器就可以根据路由表来转发数据包，但是，这只是理想情况，如果之后，网络拓扑发生了变化，或是网络链路出现了问题，OSPF协议还是会经过这三张表来重新计算新的路由，只不过不会这么复杂了，路由器在默认情况下，10S就会发送一次HELLO报文，以检测链路状态，保证链路始终是正常的。</p>
<h4 id="5-2-4-NAT原理"><a href="#5-2-4-NAT原理" class="headerlink" title="5.2.4 NAT原理"></a>5.2.4 NAT原理</h4><p>&emsp;&emsp;NAT[14]英文全称是“Network Address Translation”，中文意思是“网络地址转换”，它是一个IETF(Internet Engineering Task Force, Internet工程任务组)标准，允许一个整体机构以一个公用IP（Internet Protocol）地址出现在Internet上。顾名思义，它是一种把内部私有网络地址（IP地址）翻译成合法网络IP地址的技术，如下图所示。因此我们可以认为，NAT在一定程度上，能够有效的解决公网地址不足的问题。</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-3NAT%E8%BD%AC%E6%8D%A2%E5%8E%9F%E7%90%86%E5%9B%BE.jpg" alt="图5-3 NAT转换原理图"></p>
<p>&emsp;&emsp;简单地说，NAT就是在局域网内部网络中使用内部地址，而当内部节点要与外部网络进行通讯时，就在网关（可以理解为出口，打个比方就像院子的门一样）处，将内部地址替换成公用地址，从而在外部公网（internet）上正常使用，NAT可以使多台计算机共享Internet连接，这一功能很好地解决了公共<br>IP地址紧缺的问题。通过这种方法，可以只申请一个合法IP地址，就把整个局域网中的计算机接入Internet中。这时，NAT屏蔽了内部网络，所有内部网计算机对于公共网络来说是不可见的，而内部网计算机用户通常不会意识到NAT的存在。如下图所示。这里提到的内部地址，是指在内部网络中分配给节点的私有IP地址，这个地址只能在内部网络中使用，不能被路由转发。</p>
<p>图5-4 NAT转换演示图</p>
<h4 id="5-2-5-DNS原理"><a href="#5-2-5-DNS原理" class="headerlink" title="5.2.5 DNS原理"></a>5.2.5 DNS原理</h4><p>&emsp;&emsp;DNS^[15]^( Domain Name System)是“域名系统”的英文缩写，是一种组织成域层次结构的计算机和网络服务命名系统，它用于TCP/IP网络，它所提供的服务是用来将主机名和域名转换为IP地址的工作。DNS就是这样的一位“翻译官”，它的基本工作原理可用下图来表示。</p>
<p>图5-5 DNS转换原理图</p>
<p>&emsp;&emsp;网络通讯大部分是基于TCP/IP的，而TCP/IP是基于IP地址的，所以计算机在网络上进行通讯时只能识别如“202.96.134.133”之类的IP地址，而不能认识域名。我们无法记住10个以上IP地址的网站，所以我们访问网站时，更多的是在浏览器地址栏中输入域名，就能看到所需要的页面，这是因为有一个叫“DNS服务器”的计算机自动把我们的域名“翻译”成了相应的IP地址，然后调出IP地址所对应的网页。</p>
<p>&emsp;&emsp;DNS采用分布式层次式数据库。包含根域名服务器、顶级域名服务器、权威域名服务器、本地域名解析服务器等。</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-6DNS%E7%BB%93%E6%9E%84.png" alt="图5-6 DNS结构"></p>
<p>DNS查询过程：</p>
<ol>
<li><p>迭代查询</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-7DNS%E8%BF%AD%E4%BB%A3%E6%9F%A5%E8%AF%A2.png" alt="图5-7 DNS迭代查询"></p>
</li>
<li><p>递归查询</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-8DNS%E9%80%92%E5%BD%92%E6%9F%A5%E8%AF%A2.png" alt="图5-8 DNS递归查询"></p>
</li>
</ol>
<h4 id="5-2-6-ACL原理"><a href="#5-2-6-ACL原理" class="headerlink" title="5.2.6 ACL原理"></a>5.2.6 ACL原理</h4><p>&emsp;&emsp;访问控制列表ACL^[16]^（Access Control List）是由一条或多条规则组成的集合。所谓规则，是指描述报文匹配条件的判断语句，这些条件可以是报文的源地址、目的地址、端口号等。</p>
<p>&emsp;&emsp;ACL本质上是一种报文过滤器，规则是过滤器的滤芯。设备基于这些规则进行报文匹配，可以过滤出特定的报文，并根据应用ACL的业务模块的处理策略来允许或阻止该报文通过。通过ACL可以实现对网络中报文流的精确识别和控制，达到控制网络访问行为、防止网络攻击和提高网络带宽利用率的目的，从而切实保障网络环境的安全性和网络服务质量的可靠性。</p>
<p>&emsp;&emsp;ACL由一系列规则组成，通过将报文与ACL规则进行匹配，设备可以过滤出特定的报文，组成如下：</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-9ACL%E7%BB%93%E6%9E%84%E5%9B%BE.png" alt="图5-9 ACL结构图"></p>
<ul>
<li><p>ACL编号：用于标识ACL，表明该ACL是数字型ACL。根据ACL规则功能的不同，ACL被划分为基本ACL、高级ACL、二层ACL和用户ACL这几种类型，每类ACL编号的取值范围不同。</p>
</li>
<li><p>规则：即描述报文匹配条件的判断语句。</p>
</li>
<li><p>规则编号：用于标识ACL规则。可以自行配置规则编号，也可以由系统自动分配。ACL<br>  规则的编号范围是0～4294967294，所有规则均按照规则编号从小到大进行排序。所以，图1中的rule5排在首位，而规则编号最大的rule4294967294排在末位。系统按照规则编号从小到大的顺序，将规则依次与报文匹配，一旦匹配上一条规则即停止匹配。</p>
</li>
<li><p>动作：包括permit/deny两种动作，表示允许/拒绝。</p>
</li>
<li><p>匹配项：ACL定义了极其丰富的匹配项。除了图中的源地址和生效时间段，ACL还支持很多其他规则匹配项。例如，二层以太网帧头信息（如源MAC、目的MAC、以太帧协议类型）、三层报文信息（如目的地址、协议类型）以及四层报文信息（如TCP/UDP端口号）等。</p>
</li>
<li><p>ACL的匹配机制</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-10ACL%E5%8C%B9%E9%85%8D%E6%9C%BA%E5%88%B6%E5%9B%BE.png" alt="图5-10 ACL匹配机制图"></p>
<ol>
<li>首先系统会查找设备上是否配置了ACL。</li>
<li>如果ACL不存在，则返回ACL匹配结果为：不匹配。</li>
<li>如果ACL存在，则查找设备是否配置了ACL规则。</li>
<li>如果匹配上了permit规则，则停止查找规则，并返回ACL匹配结果为：匹配（允许）。</li>
<li>如果匹配上了deny规则，则停止查找规则，并返回ACL匹配结果为：匹配（拒绝）。</li>
<li>如果未匹配上规则，则继续查找下一条规则，以此循环。如果一直查到最后一条规则，报文仍未匹配上，则返回ACL匹配结果为：不匹配。</li>
<li>如果规则不存在，则返回ACL匹配结果为：不匹配。</li>
<li>如果规则存在，则系统会从ACL中编号最小的规则开始查找。设备将报文与ACL规则进行匹配时，遵循“一旦命中即停止匹配”的机制</li>
</ol>
<p>&emsp;&emsp;从整个ACL匹配流程可以看出，报文与ACL规则匹配后，会产生两种匹配结果：“匹配”和“不匹配”。</p>
<ul>
<li>匹配（命中规则）：指存在ACL，且在ACL中查找到了符合匹配条件的规则。不论匹配的动作是“permit”还是“deny”，都称为“匹配”，而不是只是匹配上permit规则才算“匹配”。</li>
<li>不匹配（未命中规则）：指不存在ACL，或ACL中无规则，再或者在ACL中遍历了所有规则都没有找到符合匹配条件的规则。以上三种情况，都叫做“不匹配”。</li>
</ul>
</li>
</ul>
<h3 id="5-3具体配置"><a href="#5-3具体配置" class="headerlink" title="5.3具体配置"></a>5.3具体配置</h3><p>&emsp;&emsp;根据验证方案网络结构设计图（图4-2），S2A上配置了VLAN2、3、4、5，S2B上配置了VLAN6，S2C上配置了VLAN9。此外，S3上的配置包括VLAN7、VLAN-Interface2~7、DHCP协议、OSPF协议。防火墙配置包括NAT协议、OSPF协议以及控制内外部网络用户访问权限的ACL列表。R1、R2所含配置为OSPF协议。</p>
<h4 id="5-3-1接入层交换机S2A"><a href="#5-3-1接入层交换机S2A" class="headerlink" title="5.3.1接入层交换机S2A"></a>5.3.1接入层交换机S2A</h4><ul>
<li><p>VLAN配置指令</p>
<pre class="line-numbers language-none"><code class="language-none">* VLAN2、3、4、5
[S2A] vlan 2
[S2A-vlan2] port e0&#x2F;1 to e0&#x2F;4   #把e0&#x2F;1到e0&#x2F;4加入到vlan 2
[S2A] vlan 3
[S2A-vlan3] port e0&#x2F;5 to e0&#x2F;8   #把e0&#x2F;5到e0&#x2F;8加入到vlan 3
[S2A] vlan 4
[S2A-vlan4] port e0&#x2F;9 to e0&#x2F;12  #把e0&#x2F;9到e0&#x2F;12加入到vlan 4
[S2A] vlan 5
[S2A-vlan5] port e0&#x2F;13 to e0&#x2F;16  #把e0&#x2F;13到e0&#x2F;16加入到vlan 5
* 检查配置情况
[S2A] display vlan all
* 配置trunk端口
[S2A] interface e0&#x2F;20
[S2A-e0&#x2F;20] port link-type trunk  #设置端口模式为trunk
[S2A-e0&#x2F;20] port trunk permit vlan 2 3 4 6 7 8  #该端口可以通过vlan 2 3 4 6 7 8的数据
* 检查配置情况
[S2A] display interface e0&#x2F;20		# 注意看allow-pass是否包含2&amp;3&amp;4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>配置结果</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-11S2A%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C.png" alt="图5-11 S2A配置结果"></p>
</li>
</ul>
<h4 id="5-3-2接入层交换机S2B"><a href="#5-3-2接入层交换机S2B" class="headerlink" title="5.3.2接入层交换机S2B"></a>5.3.2接入层交换机S2B</h4><ul>
<li><p>配置指令</p>
<pre class="line-numbers language-none"><code class="language-none">* VLAN6
[S2B] vlan 6
[S2B-vlan6] port e0&#x2F;1 to e0&#x2F;4  	#把e0&#x2F;1到e0&#x2F;4加入到vlan 6
* 检查配置情况
[S2B] display vlan 6
* 配置trunk端口
[S2B] interface e0&#x2F;10
[S2B-e0&#x2F;10] port link-type trunk  #设置端口模式为trunk
[S2B-e0&#x2F;10] port trunk permit vlan 2 3 4 6 7  #该端口可以通过vlan 2 3 4 6 7的数据
* 检查配置情况
[S2B] display interface e&#x2F;10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>配置结果</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-12S2B%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C.png" alt="图5-12 S2B配置结果"></p>
</li>
</ul>
<h4 id="5-3-3接入层交换机S2C"><a href="#5-3-3接入层交换机S2C" class="headerlink" title="5.3.3接入层交换机S2C"></a>5.3.3接入层交换机S2C</h4><ul>
<li><p>VLAN配置指令</p>
<pre class="line-numbers language-none"><code class="language-none">* VLAN9
[S2C] vlan 9
[S2C-vlan9] port e0&#x2F;1 to e0&#x2F;16  #把e0&#x2F;1到e0&#x2F;16加入到vlan 9
* 检查配置情况
[S2C] display vlan 9<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>配置结果</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-13S2C%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C.png" alt="图5-13 S2C配置结果"></p>
</li>
</ul>
<h4 id="5-3-4核心层交换机S3"><a href="#5-3-4核心层交换机S3" class="headerlink" title="5.3.4核心层交换机S3"></a>5.3.4核心层交换机S3</h4><ol>
<li><p>VLAN及interface-vlan配置</p>
<ul>
<li><p>配置指令</p>
<pre class="line-numbers language-none"><code class="language-none">* VLAN2&#x2F;3&#x2F;4&#x2F;6&#x2F;7&#x2F;8及SVI配置
[S3] vlan 2
[S3-vlan2] interface vlan 2
[S3-vlan-interface2] ip address 192.168.2.254 255.255.255.0		# 或用24代表掩码位数
[S3] vlan 3
[S3-vlan3] interface vlan 3
[S3-vlan-interface3] ip address 192.168.3.254 255.255.255.0	
[S3] vlan 4
[S3-vlan4] interface vlan 4
[S3-vlan-interface4] ip address 192.168.4.254 255.255.255.0	
[S3] vlan 6
[S3-vlan6] interface vlan 6
[S3-vlan-interface6] ip address 192.168.6.254 255.255.255.0
[S4] vlan 7
[S3-vlan7] port e1&#x2F;0&#x2F;9 to e1&#x2F;0&#x2F;12  		#把e1&#x2F;0&#x2F;9到e1&#x2F;0&#x2F;12加入到vlan 7
[S3-vlan7] interface vlan 7
[S3-vlan-interface7] ip address 192.168.7.254 255.255.255.0
* trunk端口配置
[S3] interface e1&#x2F;0&#x2F;1				  # 该端口连接S2A
[S3-e1&#x2F;0&#x2F;1] port link-type trunk       #设置端口模式为trunk
[S3-e1&#x2F;0&#x2F;1] port trunk permit vlan 2 3 4 6 7 #该端口可以通过vlan 2 3 4 6 7的数据
[S3] interface e1&#x2F;0&#x2F;2				 # 该端口连接S2B
[S3-e1&#x2F;0&#x2F;2] port link-type trunk      #设置端口模式为trunk
[S3-e1&#x2F;0&#x2F;2] port trunk permit vlan 2 3 4 6 7 #该端口可以通过vlan 2 3 4 6 7的数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>配置结果</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-14S3VLAN%E5%8F%8AInterface-vlan%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C.png" alt="图5-14 S3 VLAN及Interface-vlan配置结果"></p>
</li>
</ul>
</li>
<li><p>DHCP协议配置</p>
<ul>
<li><p>配置指令</p>
<pre class="line-numbers language-none"><code class="language-none">[S3] dhcp enble  #三层交换机开启dhcp服务
* VLAN 2
[S3] dhcp server ip-pool 2  #开辟地址池2
[S3-ip-pool-2] network 192.168.2.0 24 	#分配地址池中可分发的地址段
[S3-ip-pool-2] gateway-list 192.168.2.254  #配置网关
[S3-ip-pool-2] dns-list 192.168.7.2        #配置dns服务器ip
* VLAN 3
[S3] dhcp server ip-pool 3  #开辟地址池3
[S3-ip-pool-3] network 192.168.3.0 24    #分配地址池中可分发的地址段
[S3-ip-pool-3] gateway-list 192.168.3.254 #配置网关
[S3-ip-pool-3] dns-list 192.168.7.2      #配置dns服务器ip
* VLAN 4 
[S3] dhcp server ip-pool 4  #开辟地址池4
[S3-ip-pool-4] network 192.168.4.0 24  #分配地址池中可分发的地址段
[S3-ip-pool-4] gateway-list 192.168.4.254   #配置网关
[S3-ip-pool-4] dns-list 192.168.7.2  #配置dns服务器ip
* VLAN 6
[S3] dhcp server ip-pool 6  #开辟地址池6
[S3-ip-pool-6] network 192.168.6.0 24  #分配地址池中可分发的地址段
[S3-ip-pool-6] gateway-list 192.168.6.254  #配置网关
[S3-ip-pool-6] dns-list 192.168.7.2 #配置dns服务器ip<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<ul>
<li><p>配置结果</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-15S3DHCP%E5%8D%8F%E8%AE%AE%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C.png" alt="图5-15 S3 DHCP协议配置结果"></p>
</li>
</ul>
</li>
<li><p>OSPF协议配置</p>
<ul>
<li><p>配置指令</p>
<pre class="line-numbers language-none"><code class="language-none">[S3] vlan 10
[S3-vlan10] port e1&#x2F;0&#x2F;20  #把e1&#x2F;0&#x2F;20加入到vlan 10
[S3] ospf  			 	 #开启ospf服务
[S3-ospf-1] area 0 
[S3-ospf-1-area0.0.0.0] network 192.168.2.0 0.0.0.255
[S3-ospf-1-area0.0.0.0] network 192.168.3.0 0.0.0.255
[S3-ospf-1-area0.0.0.0] network 192.168.4.0 0.0.0.255
[S3-ospf-1-area0.0.0.0] network 192.168.6.0 0.0.0.255
[S3-ospf-1-area0.0.0.0] network 192.168.7.0 0.0.0.255
[S3-ospf-1-area0.0.0.0] network 192.168.8.0 0.0.0.255
[S3-ospf-1-area0.0.0.0] network 192.168.10.0 0.0.0.255<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>配置结果</p>
<pre class="line-numbers language-none"><code class="language-none">ospf 1
area 0.0.0.0
network 192.168.2.0 0.0.0.255
network 192.168.3.0 0.0.0.255
network 192.168.4.0 0.0.0.255
network 192.168.6.0 0.0.0.255
network 192.168.7.0 0.0.0.255
network 192.168.8.0 0.0.0.255
network 192.168.10.0 0.0.0.255<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
</li>
</ol>
<h4 id="5-3-5防火墙firewall"><a href="#5-3-5防火墙firewall" class="headerlink" title="5.3.5防火墙firewall"></a>5.3.5防火墙firewall</h4><ul>
<li><p>配置指令</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;firewall&gt; sys
[firewall] int e0&#x2F;0  ##对内的接口
[firewall-e0&#x2F;0] ip add 192.168.10.2 24   #配置e0&#x2F;0端口ip
[firewall-e1&#x2F;0] int e1&#x2F;0  #对外的接口
[firewall-e1&#x2F;0] ip add 202.99.160.2 28   #配置e1&#x2F;0端口ip
[firewall] fire zone untrust
[firewall-untrust] add int e1&#x2F;0   		  #将e1&#x2F;0端口加入到untrust域
[firewall] quit 
[firewall] fire zone trust
[firewall-trust] add int e0&#x2F;0      		  #将e0&#x2F;0端口加入到trust域
####配置内部网段VLAN2、3、6的NAT转换，以及禁止VLAN4访问外部网络
####配置ACL准则
[firewall] acl number 2000 #该准则应用到e1&#x2F;0的出端口，允许以下网段访问外网
[firewall-acl-2000] rule 0 permit source 192.168.2.0 0.0.0.255 
[firewall-acl-2000] rule 1 permit source 192.168.3.0 0.0.0.255 
[firewall-acl-2000] rule 2 permit source 192.168.6.0 0.0.0.255 
[firewall] acl number 2002#该准则应用到e1&#x2F;0的出端口，拒绝该网段访问外网
[firewall-acl-2002] rule 2 deny source 192.168.4.0 0.0.0.255 

####配置nat地址池
[firewall] nat address-group 0 202.99.160.5 202.99.160.11
####端口应用acl
[firewall] interface Ethernet1&#x2F;0
[firewall-e1&#x2F;0] nat outbound 2000 address-group 0   #应用nat协议和acl规则
[firewall-e1&#x2F;0] firewall packet-filter 2002 outbound  #应用acl规则
####配置OSPF协议
[firewall] ospf 1 
[firewall-ospf-1] area 0.0.0.0
#0.0.0.255是反掩码，代表192.168.10.0网段的255台主机都包含在内
[firewall-area-0.0.0.0] network 192.168.10.0 0.0.0.255	
[firewall-area-0.0.0.0] network 202.99.160.0 0.0.0.15
[firewall] firewall packet-filter default permit		#使能默认允许包通过<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>配置结果</p>
<pre class="line-numbers language-none"><code class="language-none">[H3C]dis cu
#
sysname H3C								#防火墙系统名称
#
firewall packet-filter enable					#开启包过滤功能
firewall packet-filter default permit			#使能默认允许包通过
#
insulate
#
undo connection-limit enable
connection-limit default deny
connection-limit default amount upper-limit 50 lower-limit 20
#
nat address-group 0 202.99.160.5 202.99.160.11	#NAT转换的IP地址池
#
firewall statistic system enable
#
radius scheme system
server-type extended
#
domain system
#
local-user hjd						#本地用户hjd，用于通过ftp拷贝配置文件
password simple hjd				#密码设置为hjd
#                                         
traffic behavior sit-permit               
#                                         
acl number 2000                   #允许以下网段进行NAT转换
rule 0 permit source 192.168.2.0 0.0.0.255
rule 1 permit source 192.168.3.0 0.0.0.255
rule 2 permit source 192.168.6.0 0.0.0.255
acl number 2002                    #禁止该网段从防火墙出去到外部网络
rule 0 deny source 192.168.4.0 0.0.0.255 
#                                         
interface Aux0                            
async mode flow                          
#                                         
interface Ethernet0&#x2F;0                 #内网接口的IP地址
ip address 192.168.10.2 255.255.255.0    
#                                         
interface Ethernet0&#x2F;1                     
#                                         
interface Ethernet0&#x2F;2                     
#                                         
interface Ethernet0&#x2F;3                     
#                                         
interface Ethernet1&#x2F;0                 #外网接口的IP地址
ip address 202.99.160.2 255.255.255.240  
firewall packet-filter 2002 outbound     #包过滤
nat outbound 2000 address-group 0      #应用NAT协议
#                                         
interface Ethernet1&#x2F;1                     
#                                         
interface Ethernet1&#x2F;2                     
#                                         
interface NULL0                           
#                                         
firewall zone local                    #默认。local域优先级为100
set priority 100                         
#                                         
firewall zone trust                    #默认。trust域优先级85（内网）
add interface Ethernet0&#x2F;0                
set priority 85                          
#                                         
firewall zone untrust                  #默认。untrust域优先级5（外网）
add interface Ethernet1&#x2F;0                
set priority 5                           
#                                         
firewall zone DMZ                   #默认。DMZ域，本实验没有用到
add interface Ethernet0&#x2F;1                
set priority 50                          
#                                         
firewall interzone local trust            
#                                         
firewall interzone local untrust          
#                                         
firewall interzone local DMZ              
#                                         
firewall interzone trust untrust          
#                                         
firewall interzone trust DMZ              
#                                         
firewall interzone DMZ untrust            
#
ospf 1                              #OSPF协议配置
area 0.0.0.0                             
  network 192.168.10.0 0.0.0.255          
  network 202.99.160.0 0.0.0.15           
#                                         
FTP server enable                     #开启FTP服务器用于拷贝配置文件
#								    #以下均为默认配置，无需特别设置
firewall defend ip-spoofing              
firewall defend land                     
firewall defend smurf                    
firewall defend fraggle                  
firewall defend winnuke                  
firewall defend icmp-redirect            
firewall defend icmp-unreachable         
firewall defend source-route             
firewall defend route-record             
firewall defend tracert                  
firewall defend ping-of-death            
firewall defend tcp-flag                 
firewall defend ip-fragment              
firewall defend large-icmp               
firewall defend teardrop                 
firewall defend ip-sweep                 
firewall defend port-scan                
firewall defend arp-spoofing             
firewall defend arp-reverse-query        
firewall defend arp-flood                
firewall defend frag-flood               
firewall defend syn-flood enable         
firewall defend udp-flood enable         
firewall defend icmp-flood enable        
#                                         
user-interface con 0                      
user-interface aux 0
user-interface vty 0 4
# 
return<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h4 id="5-3-6路由器R1"><a href="#5-3-6路由器R1" class="headerlink" title="5.3.6路由器R1"></a>5.3.6路由器R1</h4><ul>
<li><p>配置指令</p>
<pre class="line-numbers language-none"><code class="language-none">[R1] ospf enable 			# 开启ospf服务
[R1] display ospf
[R1] interface e0  
[R1-interface0] ospf enable area 0				#允许区域0的OSPF协议
[R1-interface0] ospf network-type broadcast		#设置网络方式为广播
报错：找不到配置选项（再执行一遍就行）
[R1-interface0] ospf network-type broadcast
[R1] interface s0
[R1-serial0] ospf enable area 0
[R1-serial0] ospf network-type broadcast
报错：找不到配置选项（再执行一遍就行）
[R1-serial0] ospf network-type broadcast
[R1] display ospf routing	# 查看OSPF配置信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>配置结果</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-16-1R1OSPF%E5%8D%8F%E8%AE%AE%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C.png" alt="图5-16-1 R1 OSPF协议配置结果"></p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-16-2R1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%88%AA%E5%9B%BE.png" alt="图5-16-2 R1配置文件截图"></p>
</li>
</ul>
<h4 id="5-3-7路由器R2"><a href="#5-3-7路由器R2" class="headerlink" title="5.3.7路由器R2"></a>5.3.7路由器R2</h4><ul>
<li><p>配置指令</p>
<pre class="line-numbers language-none"><code class="language-none">[R2] ospf enable  			# 开启ospf服务
[R2-ospf] quit
[R2] display ospf
[R2] interface e0
[R2-interface0] ospf enable area 0
[R2-interface0] ospf network-type broadcast
报错：找不到配置选项（再执行一遍就行）
[R2-interface0] ospf network-type broadcast
[R2] display ospf routing	# 查看OSPF配置信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>配置结果</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-17-1R2OSPF%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%9C.png" alt="图5-17-1 R2 OSPF配置结果"></p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE5-17-2R2%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%88%AA%E5%9B%BE.png" alt="图5-17-2 R2 配置文件截图"></p>
</li>
</ul>
<h2 id="第六章-网络服务"><a href="#第六章-网络服务" class="headerlink" title="第六章 网络服务"></a>第六章 网络服务</h2><h3 id="6-1-FTP服务器"><a href="#6-1-FTP服务器" class="headerlink" title="6.1 FTP服务器"></a>6.1 FTP服务器</h3><h4 id="6-1-1-简介"><a href="#6-1-1-简介" class="headerlink" title="6.1.1 简介"></a>6.1.1 简介</h4><p>&emsp;&emsp;FTP服务器^[17]^（File Transfer Protocol Server）是在互联网上提供文件存储和访问服务的计算机，它们依照FTP协议提供服务，FTP是File Transfer Protocol(文件传输协议)，顾名思义，就是专门用来传输文件的协议，简单地说，支持FTP协议的服务器就是FTP服务器。</p>
<p>&emsp;&emsp;FTP是用来在两台计算机之间传输文件，是Internet中应用非常广泛的服务之一，它可根据实际需要设置各用户的使用权限，同时还具有跨平台的特性，即在UNIX、Linux和Windows等操作系统中都可实现FTP客户端和服务器，相互之间可跨平台进行文件的传输。因此，FTP服务是网络中经常采用的资源共享方式之一，FTP协议有PORT和PASV两种工作模式，即主动模式和被动模式。</p>
<p>&emsp;&emsp;FTP（File Transfer Protocol）即文件传输协议，是一种基于TCP的协议，采用客户/服务器模式，通过FTP协议，用户可以在FTP服务器中进行文件的上传或下载等操作，虽然现在通过HTTP协议下载的站点有很多，但是由于FTP协议可以很好地控制用户数量和宽带的分配，快速方便地上传、下载文件，因此FTP已成为网络中文件上传和下载的首选服务器，同时，它也是一个应用程序，用户可以通过它把自己的计算机与世界各地所有运行FTP协议的服务器相连，访问服务器上的大量程序和信息。</p>
<p>FTP服务的功能是实现完整文件的异地传输，特点如下：</p>
<ol>
<li><p> FTP使用两个平行连接：控制连接和数据连接。控制连接在两主机间传送控制命令，如用户身份、口令、改变目录命令等。数据连接只用于传送数据。</p>
</li>
<li><p> 在一个会话期间，FTP服务器必须维持用户状态，也就是说，和某一个用户的控制连接不能断开。另外，当用户在目录树中活动时，服务器必须追踪用户的当前目录，这样，FTP就限制了并发用户数量。</p>
</li>
<li><p> FTP支持文件沿任意方向传输。当用户与一远程计算机建立连接后，用户可以获得一个远程文件也可以将一本地文件传输至远程机器。</p>
</li>
</ol>
<h4 id="6-1-2-配置方法"><a href="#6-1-2-配置方法" class="headerlink" title="6.1.2 配置方法"></a>6.1.2 配置方法</h4><ol>
<li><p>安装IIS(Internet Information Services)</p>
<ol>
<li><p>计算机—控制面板—程序—打开或关闭Windows功能</p>
</li>
<li><p>将Internet信息服务下的FTP服务器与Web管理工具(IIS)全部勾选，等它自动安装完成</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE6-1%E5%AE%89%E8%A3%85IIS.png" alt="图6-1 安装IIS"></p>
</li>
</ol>
</li>
<li><p>网站搭建</p>
<ol>
<li><p>点击计算机右键—管理—服务和应用程序，点击Internet信息服务（IIS）管理</p>
</li>
<li><p>网站右键—添加FTP站点，输入名称并添加一条物理路径（新建一个文件夹即可）</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE6-2-1%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA.png" alt="图6-2-1 网站搭建"></p>
</li>
<li><p>下一步，默认端口位21，IP地址填写本机地址如192.168.7.1，勾选无SSL。</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE6-2-2%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA.png" alt="图6-2-2 网站搭建"></p>
</li>
<li><p>下一步，身份验证选择匿名和基本，选择所有用户可访问，权限勾选读取和写入。创建完成。</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE6-2-3%E7%BD%91%E7%AB%99%E6%90%AD%E5%BB%BA.png" alt="图6-2-3 网站搭建"></p>
</li>
</ol>
</li>
<li><p>服务测试</p>
<p>打开文件资源管理器，输入<a href="ftp://192.168.7.1,可以进入为ftp设置的文件夹./">ftp://192.168.7.1，可以进入为FTP设置的文件夹。</a></p>
</li>
</ol>
<h3 id="6-2-E-mail服务器"><a href="#6-2-E-mail服务器" class="headerlink" title="6.2 E-mail服务器"></a>6.2 E-mail服务器</h3><h4 id="6-2-1-简介"><a href="#6-2-1-简介" class="headerlink" title="6.2.1 简介"></a>6.2.1 简介</h4><p>&emsp;&emsp;邮件服务器^[18]^是一种用来负责电子邮件收发管理的设备。邮件服务器构成了电子邮件系统的核心。每个收信人都有一个位于某个邮件服务器上的邮箱(mailbox)。Bob的邮箱用于管理和维护已经发送给他的邮件消息。一个邮件消息的典型旅程是从发信人的用户代理开始，邮件发信人的邮件服务器，中转到收信人的邮件服务器，然后投递到收信人的邮箱中。当Bob想查看自己的邮箱中的邮件消息时，存放该邮箱的邮件服务器将以他提供的用户名和口令认证他。Alice的邮件服务器还得处理Bob的邮件服务器出故障的情况。如果Alice的邮件服务器无法把邮件消息立即递送到Bob的邮件服务器，Alice的服务器就把它们存放在消息队列(message queue)中，以后再尝试递送。这种尝试通常每30分钟左右执行一次：要是过了若干天仍未尝试成功，该服务器就把这个消息从消息队列中去除掉，同时以另一个邮件消息通知发信人(即Alice)。</p>
<p>&emsp;&emsp;简单邮件传送协议(SMTP)是因特网电子邮件系统首要的应用层协议。它使用由TCP提供的可靠的数据传输服务把邮件消息从发信人的邮件服务器传送到收信人的邮件服务器。跟大多数应用层协议一样，SMTP也存在两个端：在发信人的邮件服务器上执行的客户端和在收信人的邮件服务器上执行的服务器端。SMTP的客户端和服务器端同时运行在每个邮件服务器上。当一个邮件服务器在向其他邮件服务器发送邮件消息时，它是作为SMTP客户在运行。当一个邮件服务器从其他邮件服务器接收邮件消息时，它是作为SMTP服务器在运行。</p>
<h4 id="6-2-2-配置方法"><a href="#6-2-2-配置方法" class="headerlink" title="6.2.2 配置方法"></a>6.2.2 配置方法</h4><p>我们采用Winmail 邮件服务器+ Foxmail客户端来搭建局域网邮件服务器。</p>
<ol>
<li><p> 准备两台电脑通过交换机相连，在其中一台电脑上安装Winmail服务器，并在两台电脑上均安装好Foxmail客户端。</p>
</li>
<li><p>运行Winmail<br> server，然后打开Winmail管理客户端，管理用户的用户名和密码随意设置。</p>
<ul>
<li>创建域名<img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE6-3-1%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE-%E5%88%9B%E5%BB%BA%E5%9F%9F%E5%90%8D.png" alt="图6-3-1 邮件服务器配置-创建域名"></li>
<li>创建用户名和密码。<img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE6-3-2%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7.png" alt="图6-3-2 邮件服务器配置-创建用户"></li>
</ul>
</li>
<li><p>在两台电脑的Foxmail上分别创建上一步定义好的用户。打开Foxmail，选择其它邮箱。按下图配置。此时需要保证该电脑已经与邮件服务器所在电脑处于同一局域网下。</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE6-4Foxmail%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE.png" alt="图6-4 Foxmail客户端配置"></p>
</li>
<li><p>发邮件测试。</p>
</li>
</ol>
<h3 id="6-3-Web服务器"><a href="#6-3-Web服务器" class="headerlink" title="6.3 Web服务器"></a>6.3 Web服务器</h3><h4 id="6-3-1-简介"><a href="#6-3-1-简介" class="headerlink" title="6.3.1 简介"></a>6.3.1 简介</h4><p>&emsp;&emsp;WEB服务器^[19]^也称为WWW(WORLD WIDE WEB)服务器，主要功能是提供网上信息浏览服务。WWW 是 Internet 的多媒体信息查询工具，是 Internet 上近年才发展起来的服务，也是发展最快和目前用的最广泛的服务。正是因为有了WWW工具，才使得近年来 Internet 迅速发展，且用户数量飞速增长。</p>
<p>&emsp;Web服务器是指驻留于因特网上某种类型计算机的程序。当Web浏览器（客户端）连到服务器上并请求文件时，服务器将处理该请求并将文件反馈到该浏览器上，附带的信息会告诉浏览器如何查看该文件（即文件类型）。服务器使用HTTP（超文本传输协议）与客户机浏览器进行信息交流，这就是人们常把它们称为HTTP服务器的原因。</p>
<p>&emsp;Web服务器不仅能够存储信息，还能在用户通过Web浏览器提供的信息的基础上运行脚本和程序。</p>
<p>&emsp;Web服务器的工作原理并不复杂，一般可分成如下4个步骤：连接过程、请求过程、应答过程以及关闭连接。下面对这4个步骤作一简单的介绍。连接过程就是Web服务器和其浏览器之间所建立起来的一种连接。查看连接过程是否实现，用户可以找到和打开socket这个虚拟文件，这个文件的建立意味着连接过程这一步骤已经成功建立。请求过程就是Web的浏览器运用socket这个文件向其服务器而提出各种请求。应答过程就是运用HTTP协议把在请求过程中所提出来的请求传输到Web的服务器，进而实施任务处理，然后运用HTTP协议把任务处理的结果传输到Web的浏览器，同时在Web的浏览器上面展示上述所请求之界面。关闭连接就是当上一个步骤–应答过程完成以后，Web服务器和其浏览器之间断开连接之过程。Web服务器上述4个步骤环环相扣、紧密相联，逻辑性比较强，可以支持多个进程、多个线程以及多个进程与多个线程相混合的技术。</p>
<h4 id="6-3-2-配置方法"><a href="#6-3-2-配置方法" class="headerlink" title="6.3.2 配置方法"></a>6.3.2 配置方法</h4><p>我们采用NodeJs + Git + Hexo搭建了一个简单的静态网页。</p>
<ol>
<li><p>安装NodeJs和Git</p>
</li>
<li><p>安装Hexo</p>
<ol>
<li><p>找个地方右键`Git Bash Here`，后面的指令操作都是使用`Git Bash`</p>
</li>
<li><p>配置npm的国内镜像源：</p>
<p>npm install -g cnpm –registry=<a target="_blank" rel="noopener" href="https://registry.npm.taobao.or/">https://registry.npm.taobao.or</a></p>
</li>
<li><p>配置完成后，输入npm info hexo，如果配置成功，dist会显示</p>
<p>.tarball: <a target="_blank" rel="noopener" href="https://registry.nlark.com/hexo/download/hexo-5.4.0.tgz">https://registry.nlark.com/hexo/download/hexo-5.4.0.tgz</a></p>
</li>
<li><p>通过npm安装Hexo（-g是指定全局安装，之后可以在任意位置使用hexo指令）</p>
<p>npm install -g hexo</p>
</li>
<li><p>然后输入hexo -v查看是否安装成功。若出现版本号，则至此已安装完成</p>
</li>
<li><p>接下来初始化我们的静态网站，进入到存放博客文件的目录下</p>
<p>hexo init MyBlog # 初始化创建，将在当前目录下新建MyBlog文件夹</p>
<p>cd MyBlog # 进入这个文件夹，这个文件夹下面将存放所有相关文件</p>
<p>npm install # 进一步安装hexo所需文件</p>
<ol>
<li><p>大概效果如下：</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE6-5Hexo%E5%AE%89%E8%A3%85.png" alt="图6-5 Hexo安装"></p>
</li>
<li><p>指令执行完成后，指定文件夹MyBlog目录下有：</p>
<p>* node_modules/：Hexo的依赖包</p>
<p>* scaffolds/：生成文章的一些模板</p>
<p>* source/：用来存放写的文章</p>
<p>* themes/：主题</p>
<p>* _config.yml：博客的配置文件</p>
<p>*<br>其它：.github/、.gitignore、_config.landscape.yml、package.json、package-lock.json</p>
</li>
</ol>
</li>
<li><p>打开本地服务器查看博客</p>
<p>hexo generate # 生成静态网页</p>
<p>hexo server # 打开本地服务器(默认是4000端口)</p>
<p>正常情况下应该会出现下图：</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE6-6%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F.png" alt="图6-6 安装成功"></p>
</li>
</ol>
</li>
</ol>
<h3 id="6-4-DNS服务器"><a href="#6-4-DNS服务器" class="headerlink" title="6.4 DNS服务器"></a>6.4 DNS服务器</h3><p>&emsp;由于我们发现Windows自带的IIS(Internet Information Services)无法配置DNS服务器，且在因为安装Windows Server<br>2016 需要更换实验室电脑系统，故采用Ubuntu-21.04-desktop和DNS服务器软件BIND9（Berkeley Internet Name Domain v9）进行DNS的服务搭建。由于搭建步骤较为繁琐，故没有写在报告里，所有步骤均已整理至博客中^[20]^。</p>
<h2 id="第七章-验证方案"><a href="#第七章-验证方案" class="headerlink" title="第七章 验证方案"></a>第七章 验证方案</h2><ol>
<li><p>DHCP协议配置测试（VLAN2-4）</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-1DHCP%E5%8D%8F%E8%AE%AE%E9%85%8D%E7%BD%AE%E6%B5%8B%E8%AF%95%E7%BB%93%E6%9E%9C%E5%9B%BE.png" alt="图7-1 DHCP协议配置测试结果图"></p>
</li>
<li><p>内网VLAN内通信测试（以VLAN2为例）</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-2VLAN%E5%86%85%E9%80%9A%E4%BF%A1%E6%B5%8B%E8%AF%95.png" alt="图7-2 VLAN内通信测试"></p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-3-1VLAN%E9%97%B4%E9%80%9A%E4%BF%A1%E6%B5%8B%E8%AF%95%EF%BC%88VLAN2toVLAN3%EF%BC%89.png" alt="图7-3-1 VLAN间通信测试（VLAN2 to VLAN3）"></p>
</li>
<li><p>内网VLAN间通信测试</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-3-2VLAN%E9%97%B4%E9%80%9A%E4%BF%A1%E6%B5%8B%E8%AF%95%EF%BC%88VLAN2toVLAN6%EF%BC%89.png" alt="图7-3-2 VLAN间通信测试（VLAN2 to VLAN6）"></p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-3-3VLAN%E9%97%B4%E9%80%9A%E4%BF%A1%E6%B5%8B%E8%AF%95%EF%BC%88%E4%B8%8EVLAN5%E9%9A%94%E7%A6%BB%EF%BC%89.png" alt="图7-3-3 VLAN间通信测试（与VLAN5隔离）"></p>
</li>
<li><p>内外部网络通信测试</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-4-1%E5%86%85%E5%A4%96%E9%83%A8%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%EF%BC%88VLAN2toVLAN9%EF%BC%89.png" alt="图7-4-1 内外部网络通信（VLAN2 to VLAN9）"></p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-4-2%E5%86%85%E5%A4%96%E9%83%A8%E7%BD%91%E7%BB%9C%E9%80%9A%E4%BF%A1%EF%BC%88VLAN9toVLAN2%EF%BC%89.png" alt="图7-4-2 内外部网络通信（VLAN9 to VLAN2）"></p>
</li>
<li><p>网络服务测试</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-5FTP%E6%9C%8D%E5%8A%A1%E6%B5%8B%E8%AF%95.png" alt="图7-5 FTP服务测试"></p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-6E-mail%E6%9C%8D%E5%8A%A1%E6%B5%8B%E8%AF%95%EF%BC%88%E6%94%B6%E5%8F%91%E9%82%AE%E4%BB%B6%EF%BC%89.png" alt="图7-6 E-mail服务测试（收发邮件）"></p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-7-1DNS%E8%A7%A3%E6%9E%90%E6%B5%8B%E8%AF%95.png" alt="图7-7-1 DNS解析测试"></p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-7-2DNS+Web%E6%9C%8D%E5%8A%A1%E6%B5%8B%E8%AF%95.png" alt="图7-7-2 DNS + Web服务测试"></p>
</li>
<li><p>NAT转换测试</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE7-8NAT%E8%BD%AC%E6%8D%A2%E6%8A%93%E5%8C%85%E6%B5%8B%E8%AF%95.png" alt="图7-8 NAT转换抓包测试"></p>
</li>
</ol>
<h2 id="第八章-改进"><a href="#第八章-改进" class="headerlink" title="第八章 改进"></a>第八章 改进</h2><p>&emsp;出于模拟真实网络拓扑结构的考虑，我们针对原有结构和功能做了些许改动。由于时间有限，我们简单地将内网中的FTP服务器开放给外部网络^[23]^，并利用IIS(Internet Information Services)在外部网络搭建FTP、Web服务器以供内网访问测试。测试网络拓扑如图8-1所示。</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE8-1%E6%94%B9%E8%BF%9B%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E9%83%A8%E5%88%86.png" alt="图8-1 改进网络结构部分"></p>
<p>本次改进涉及设备有：防火墙、外部网络服务器。</p>
<p>具体配置包括：</p>
<ol>
<li><p>将内网FTP服务器地址192.168.7.1:21经过NAT转换为公网IP地址202.99.160.12:21。</p>
</li>
<li><p>在外部网络新增两个服务：FTP、Web服务器，IP地址为202.99.160.3。</p>
<p>防火墙配置指令：</p>
<pre class="line-numbers language-none"><code class="language-none">[firewall] acl number 2003
[firewall-acl-2003] rule 0 permit source 192.168.7.1 0			#仅允许一台主机进行转换
[firewall] nat address-group 1 202.99.160.12 202.99.160.12		#NAT转换地址池
[firewall] int e1&#x2F;0				#进入WAN0口（外网接口）
[firewall-e1&#x2F;0] nat server protocol tcp global 202.99.160.12 ftp inside 192.168.7.1 ftp
[firewall-e1&#x2F;0] nat outbound 2003 address-group 1				#应用NAT转换的ACL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>防火墙相关配置结果：（仅包含相关内容）</p>
<pre class="line-numbers language-none"><code class="language-none">#
sysname H3C
#
firewall packet-filter enable					#使能包过滤功能
firewall packet-filter default permit				#默认允许包通过
#
nat address-group 0 202.99.160.5 202.99.160.11	#VLAN236网段的公网IP地址池
nat address-group 1 202.99.160.12 202.99.160.12	#内网服务器的公网IP地址池
#
acl number 2000                           
rule 0 permit source 192.168.2.0 0.0.0.255
rule 1 permit source 192.168.3.0 0.0.0.255
rule 2 permit source 192.168.6.0 0.0.0.255
acl number 2002                           
rule 0 deny source 192.168.4.0 0.0.0.255 
acl number 2003                           	#内网服务器NAT转换相关
rule 0 permit source 192.168.7.1 0       
#                                         
interface Ethernet0&#x2F;0                     
ip address 192.168.10.2 255.255.255.0    
#
interface Ethernet1&#x2F;0 
 ip address 202.99.160.2 255.255.255.240  
 firewall packet-filter 2002 outbound  			#应用ACL2002规则进行包过滤
 nat outbound 2003 address-group 1				#内网服务器NAT转换
 nat outbound 2000 address-group 0				#内网VLAN236网段NAT转换
 #内网FTP服务器的NAT端口映射
 nat server protocol tcp global 202.99.160.12 ftp inside 192.168.7.1 ftp
#<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>配置结果测试：</p>
<ul>
<li><p>外部网络用户202.99.160.4通过公网IP地址202.99.160.12访问内网FTP服务器</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE8-2%E5%A4%96%E7%BD%91%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E5%86%85%E7%BD%91FTP%E6%9C%8D%E5%8A%A1%E5%99%A8.png" alt="图8-2 外网用户访问内网FTP服务器"></p>
</li>
<li><p>内网用户访问外网FTP服务器</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE8-3%E5%86%85%E7%BD%91%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91FTP%E6%9C%8D%E5%8A%A1%E5%99%A8.png" alt="图8-3 内网用户访问外网FTP服务器"></p>
</li>
<li><p>内网用户访问外网Web服务器</p>
<p><img src="/medias/loading.gif" data-original="https://cdn.jsdelivr.net/gh/321hjd/ImageBed/study/LocalNetworkBuilding/%E5%9B%BE8-4%E5%86%85%E7%BD%91%E7%94%A8%E6%88%B7%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91Web%E6%9C%8D%E5%8A%A1%E5%99%A8.png" alt="图8-4 内网用户访问外网Web服务器"></p>
</li>
</ul>
</li>
</ol>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[1] 赵文忠.试论校园局域网组网技术方案[J].计算机光盘软件与应用,2012,15(23):91+104.<br>[2] 潘江瀚.校园网组网架构的比较与分析[J].计算机光盘软件与应用,2012(09):99-100.<br>[3] 杨朋.校园无线网组网技术及应用的探讨[J].数字通信世界,2019(01):66.<br>[4] 张圣,陈伟.基于WLAN技术的无线校园网组网研究[J].信息技术,2005(07):17-20.<br>[5] 《局域网组建、管理与维护（第3版）》刘永华，张秀洁主编<br>[6] <a target="_blank" rel="noopener" href="https://product.pconline.com.cn/itbk/wlbg/network/1107/2474289.html">《PConline-交换机是什么》</a><br>[7] <a target="_blank" rel="noopener" href="https://product.pconline.com.cn/itbk/wlbg/network/1204/2749969.html">《PConline-二层交换机是什么》</a><br>[8] <a target="_blank" rel="noopener" href="https://product.pconline.com.cn/itbk/wlbg/network/1204/2750118.html">《PConline-三层交换机是什么》</a><br>[9] <a target="_blank" rel="noopener" href="https://www.zhihu.com/topic/19561099/intro">《PConline-路由器》</a><br>[10] <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%98%B2%E7%81%AB%E5%A2%99/52767#2">《百度百科-防火墙》</a><br>[11] <a target="_blank" rel="noopener" href="https://blog.csdn.net/T146lLa128XX0x/article/details/95688710">《CSDN-VLAN工作原理》</a><br>[12] <a target="_blank" rel="noopener" href="https://docs.oracle.com/cd/E24847_01/html/819-7058/dhcp-overview-3.html">《ORACLE系统管理指南-DHCP的工作原理》</a><br>[13] <a target="_blank" rel="noopener" href="https://blog.csdn.net/Breeze_CAT/article/details/79704903">《CSDN-OSPF原理及配置》</a><br>[14] <a target="_blank" rel="noopener" href="https://www.cnblogs.com/derrick/p/4052401.html">《CSDN-NAT技术基本原理与应用》</a><br>[15] <a target="_blank" rel="noopener" href="https://www.cnblogs.com/gopark/p/8430916.html">《博客园-DNS原理及其解析过程》</a><br>[16] <a target="_blank" rel="noopener" href="https://www.sohu.com/a/446073085_120888633">《搜狐-5分钟了解ACL基本原理和四大分类》</a><br>[17] <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/FTP%E6%9C%8D%E5%8A%A1%E5%99%A8/1926327?fr=aladdin">《百度百科-FTP服务器》</a><br>[18] <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%82%AE%E4%BB%B6%E6%9C%8D%E5%8A%A1%E5%99%A8">《百度百科-邮件服务器》</a><br>[19] <a target="_blank" rel="noopener" href="https://baike.baidu.com/item/WEB%E6%9C%8D%E5%8A%A1%E5%99%A8">《百度百科-WEB服务器》</a><br>[20] <a href="https://321hjd.github.io/yyds/c9587404.html">《使用Ubuntu搭建内网DNS服务》</a><br>[21] 《计算机网络课件》<br>[22] 《IP网络基础知识学习之笑傲江湖新篇》<br>[23] <a target="_blank" rel="noopener" href="https://zhiliao.h3c.com/questions/dispcont/116359">《知了社区-H3C SECPATH F100-C60-WiNet防火墙如何进行端口映射》</a></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">hjd</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://321hjd.github.io/yyds/a86e8493.html">https://321hjd.github.io/yyds/a86e8493.html</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">hjd</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E5%B1%80%E5%9F%9F%E7%BD%91%E7%BB%84%E5%BB%BA/">
                                    <span class="chip bg-color">局域网组建</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/loading.gif" data-original="/medias/reward/alipay.png" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/loading.gif" data-original="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="/libs/valine/av-min.js"></script>
<script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/valine/Valine.min.js"></script>
<script>
	new Valine({ 
		el: '#vcomments', 
		enableQQ: 'true',  
		appId: 'V4ETGQevyrFzDtGcQSSRttRN-gzGzoHsz',
		appKey: 'FahUXUXEu0pDxHsRduIOcBF6', 
		visitor: 'true' === 'true',
		avatar: 'monsterid',
		pageSize: '10', 
		lang: 'zh-cn', 
		placeholder: 'just go go',
		meta: ['nick', 'mail'],
		requiredFields: ['nick','mail'],
		tagMeta: ["博主", "小伙伴", "访客"],
		master: ["d502ea4605b856df3b9b73bad1e8592e"],	// 似乎只能用小写，大写无法识别
		// friends: // 小伙伴MD5加密后的邮箱
		// metaPlaceholder: // 昵称和邮箱无内容时的显示内容
		recordIP: true, 
		emojiCDN: '//i0.hdslb.com/bfs/emote/',
		// 表情title和图片映射
		emojiMaps: { 
			"让我瞅瞅": "https://i.loli.net/2021/07/18/bzTH82kc7KnsBXC.jpg",
			"tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png", 
			"tv_亲亲": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png", 
			"tv_偷笑": "bb690d4107620f1c15cff29509db529a73aee261.png",
			"tv_再见": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png", 
			"tv_冷漠": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
			"tv_发怒": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
			"tv_发财": "34db290afd2963723c6eb3c4560667db7253a21a.png", 
			"tv_可爱": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png", 
			"tv_吐血": "09dd16a7aa59b77baa1155d47484409624470c77.png", 
			"tv_呆": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
			"tv_呕吐": "9f996894a39e282ccf5e66856af49483f81870f3.png",
			"tv_困": "241ee304e44c0af029adceb294399391e4737ef2.png",
			"tv_坏笑": "1f0b87f731a671079842116e0991c91c2c88645a.png",
			"tv_大佬": "093c1e2c490161aca397afc45573c877cdead616.png",
			"tv_大哭": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
			"tv_委屈": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
			"tv_害羞": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
			"tv_尴尬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
			"tv_微笑": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
			"tv_思考": "90cf159733e558137ed20aa04d09964436f618a1.png",
			"tv_惊吓": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png", 
			"tv_打脸": "56ab10b624063e966bfcb76ea5dc4794d87dfd47.png",
			"tv_抓狂": "fe31c08edad661d63762b04e17b8d5ae3c71a757.png",
			"tv_抠鼻": "c666f55e88d471e51bbd9fab9bb308110824a6eb.png", 
			"tv_斜眼笑": "911f987aa8bc1bee12d52aafe62bc41ef4474e6c.png",
			"tv_无奈": "ea8ed89ee9878f2fece2dda0ea8a5dbfe21b5751.png",
			"tv_晕": "5443c22b4d07fb1907ccc610c8e6db254f2461b7.png",
			"tv_流汗": "cead1c351ab8d79e9f369605beb90148db0fbed3.png",
			"tv_流泪": "7e71cde7858f0cd50d74b0264aa26db612a8a167.png",
			"tv_流鼻血": "c32d39db2737f89b904ca32700d140a9241b0767.png",
			"tv_点赞": "f85c354995bd99e28fc76c869bfe42ba6438eff4.png",
			"tv_生气": "26702dcafdab5e8225b43ffd23c94ac1ff932654.png", 
			"tv_生病": "8b0ec90e6b86771092a498c54f09fc94621c1900.png", 
			"tv_疑问": "0793d949b18d7be716078349c202c15ff166f314.png",
			"tv_白眼": "c1d59f439e379ee50eef488bcb5e5378e5044ea4.png",
			"tv_皱眉": "72ccad6679fea0d14cce648b4d818e09b8ffea2d.png",
			"tv_目瞪口呆": "0b8cb81a68de5d5365212c99375e7ace3e7891b7.png",
			"tv_睡着": "8b196675b53af58264f383c50ad0945048290b33.png",
			"tv_笑哭": "1abc628f6d4f4caf9d0e7800878f4697abbc8273.png",
			"tv_腼腆": "89712c0d4af73e67f89e35cbc518420380a7f6f4.png",
			"tv_色": "61822c7e9aae5da76475e7892534545336b23a6f.png",
			"tv_调侃": "4bc022533ef31544ca0d72c12c808cf4a1cce3e3.png",
			"tv_调皮": "b9c41de8e82dd7a8515ae5e3cb63e898bf245186.png", 
			"tv_鄙视": "6e72339f346a692a495b123174b49e4e8e781303.png", 
			"tv_闭嘴": "c9e990da7f6e93975e25fd8b70e2e290aa4086ef.png",
			"tv_难过": "87f46748d3f142ebc6586ff58860d0e2fc8263ba.png",
			"tv_馋": "fc7e829b845c43c623c8b490ee3602b7f0e76a31.png",
			"tv_鬼脸": "0ffbbddf8a94d124ca2f54b360bbc04feb6bbfea.png",
			"tv_黑人问号": "45821a01f51bc867da9edbaa2e070410819a95b2.png",
			"tv_鼓掌": "1d21793f96ef4e6f48b23e53e3b9e42da833a0f6.png" 
			// ... 更多表情 
		} 
	});

</script>

<!--酷Q推送-->


<!-- 直达评论 -->
<div id="to_comment" class="comment-scroll">     
	<a class="btn-floating btn-large waves-effect waves-light" href="#vcomments" title="直达评论">        
		<i class="fas fa-comments"></i>    
	</a> 
</div> 
 

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/yyds/83153ec8.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/loading.gif" data-original="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/medias/featureimages/15.jpg" class="responsive-img" alt="矩阵分解算法">
                        
                        <span class="card-title">矩阵分解算法</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            几种矩阵分解算法的总结和推导
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-01-05
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E7%9F%A9%E9%98%B5/" class="post-category">
                                    矩阵
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E7%9F%A9%E9%98%B5%E5%88%86%E8%A7%A3/">
                        <span class="chip bg-color">矩阵分解</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/yyds/c9587404.html">
                    <div class="card-image">
                        
                        
                        <img src="/medias/loading.gif" data-original="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/medias/featureimages/4.jpg" class="responsive-img" alt="使用Ubuntu搭建内网DNS服务">
                        
                        <span class="card-title">使用Ubuntu搭建内网DNS服务</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            由于课程实验所需，总结了使用Ubuntu搭建简易局域网DNS服务器的步骤
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-11-05
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E9%85%8D%E7%BD%AE/" class="post-category">
                                    配置
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/DNS%E6%90%AD%E5%BB%BA/">
                        <span class="chip bg-color">DNS搭建</span>
                    </a>
                    
                    <a href="/tags/Ubuntu/">
                        <span class="chip bg-color">Ubuntu</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('120')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE' || selection.getRangeAt(0).commonAncestorContainer.nodeName === 'CODE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: hjd&#39;blog<br />'
            + '文章作者: hjd<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>


    <footer class="page-footer bg-color">
	
        <link rel="stylesheet" href="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="tencent"
                   type="playlist"
                   id="8085887776"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&copy; 2021 hjd.
			
			<br>             
			<span id="sitetime"></span><span class="my-face">(ง •_•)ง</span> 
            <br>
			
			
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">96.3k</span>&nbsp;字
            

			

            
                         
					<span id="busuanzi_container_site_pv" style='display:none'></span>    
						&nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;   
						<span id="busuanzi_value_site_pv" class="white-color"></span>  
				            
				               
					<span id="busuanzi_container_site_uv" style='display:none'></span>   
						&nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;                    
						<span id="busuanzi_value_site_uv" class="white-color"></span>       
				
            
			
			
            <br>

        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/321hjd" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>















</div>
    </div>
</footer>

<div class="progress-bar"></div>

<script language=javascript>    
	function siteTime() {        
		window.setTimeout("siteTime()", 1000);       
		var seconds = 1000;        
		var minutes = seconds * 60;        
		var hours = minutes * 60;        
		var days = hours * 24;      
		var years = days * 365;       
		var today = new Date();       
		var todayYear = today.getFullYear();     
		var todayMonth = today.getMonth() + 1;      
		var todayDate = today.getDate();        
		var todayHour = today.getHours();       
		var todayMinute = today.getMinutes();     
		var todaySecond = today.getSeconds();       
		/* 
		Date.UTC() -- 返回date对象距世界标准时间(UTC)1970年1月1日午夜之间的毫秒数(时间戳)        
		year - 作为date对象的年份，为4位年份值       
		month - 0-11之间的整数，做为date对象的月份     
		day - 1-31之间的整数，做为date对象的天数        
		hours - 0(午夜24点)-23之间的整数，做为date对象的小时数     
		minutes - 0-59之间的整数，做为date对象的分钟数       
		seconds - 0-59之间的整数，做为date对象的秒数        
		microseconds - 0-999之间的整数，做为date对象的毫秒数 */    
		var t1 = Date.UTC(2021, 07, 13, 00, 00, 00); //北京时间2021-7-13 00:00:00       
		var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);       
		var diff = t2 - t1;    
		var diffYears = Math.floor(diff / years);  
		var diffDays = Math.floor((diff / days) - diffYears * 365);         var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);      
		var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) / minutes);     
		var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours - diffMinutes * minutes) / seconds);   
		document.getElementById("sitetime").innerHTML = "本站已努力运行了 " +diffYears+" 年 "+diffDays + " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";    
	}/*因为建站时间还没有一年，就将之注释掉了。需要的可以取消*/   
	siteTime();
</script>

<script> 
	$(document).ready(function () {
		var int = setInterval(fixCount, 50); // 50ms周期检测函数
		var pvcountOffset = 0; // 初始化首次数据
		var uvcountOffset = 0; 
		function fixCount() { 
			if (document.getElementById("busuanzi_container_site_pv").style.display != "none") {
				$("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + pvcountOffset); clearInterval(int);
				} 
			if ($("#busuanzi_container_site_pv").css("display") != "none") {
				$("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + uvcountOffset); // 加上初始数据
				clearInterval(int); // 停止检测
			} 
		} 
	});
</script> 


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/materialize/materialize.min.js"></script>
    <script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/aos/aos.js"></script>
    <script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="https://fastly.jsdelivr.net/gh/321hjd/CDN-for-Hexo@b4706a7/source/libs/instantpage/instantpage.js" type="module"></script>
    

	<script type="text/javascript">   
		var OriginTitile = document.title, st;    
		document.addEventListener("visibilitychange", function () {
			document.hidden ? (document.title = "🙈😜有本事点我", clearTimeout(st)) : (document.title = "( ఠൠఠ )ﾉ啊你还真点啊", 
				st = setTimeout(function () {
					document.title = OriginTitile             
				}, 3e3))    
		}) 
	</script>

	<!--动态线条背景--> 
	<script type="text/javascript" 
		color="122 103 238" opacity='0.7' zIndex="-2" count="200" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"> 
	</script>

<script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(n){n.imageLazyLoadSetting.processImages=o;var e=n.imageLazyLoadSetting.isSPA,i=n.imageLazyLoadSetting.preloadRatio||1,r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function o(){e&&(r=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var t,a=0;a<r.length;a++)0<=(t=(t=r[a]).getBoundingClientRect()).bottom&&0<=t.left&&t.top<=(n.innerHeight*i||document.documentElement.clientHeight*i)&&function(){var t,e,n,i,o=r[a];t=o,e=function(){r=r.filter(function(t){return o!==t})},n=new Image,i=t.getAttribute("data-original"),n.onload=function(){t.src=i,e&&e()},t.src!==i&&(n.src=i)}()}o(),n.addEventListener("scroll",function(){var t,e;t=o,e=n,clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)})}(this);</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","hOffset":100,"vOffset":-50,"width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7},"log":false});</script></body>

</html>
